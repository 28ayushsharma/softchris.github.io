<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Great E2E testing with Cypress</title>
    <meta name="description" content="[object Object]">
    <head link="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-abap.js"></head>
    
    <link rel="preload" href="/assets/css/0.styles.8c98fca4.css" as="style"><link rel="preload" href="/assets/js/app.bc4509b6.js" as="script"><link rel="preload" href="/assets/js/9.20ba5650.js" as="script"><link rel="preload" href="/assets/js/4.b33b06f6.js" as="script"><link rel="preload" href="/assets/js/103.89772e5e.js" as="script"><link rel="prefetch" href="/assets/js/1.76e1fa2c.js"><link rel="prefetch" href="/assets/js/10.51dda52b.js"><link rel="prefetch" href="/assets/js/100.467626d3.js"><link rel="prefetch" href="/assets/js/101.86d99a29.js"><link rel="prefetch" href="/assets/js/102.095cd8f0.js"><link rel="prefetch" href="/assets/js/104.cff87ef0.js"><link rel="prefetch" href="/assets/js/105.e9f14a21.js"><link rel="prefetch" href="/assets/js/106.c2d324ee.js"><link rel="prefetch" href="/assets/js/107.e56bde0a.js"><link rel="prefetch" href="/assets/js/108.afe1f818.js"><link rel="prefetch" href="/assets/js/109.bdab2a38.js"><link rel="prefetch" href="/assets/js/11.836ffd95.js"><link rel="prefetch" href="/assets/js/110.d3172a8a.js"><link rel="prefetch" href="/assets/js/111.46445704.js"><link rel="prefetch" href="/assets/js/112.c1f25142.js"><link rel="prefetch" href="/assets/js/113.49fa1ce6.js"><link rel="prefetch" href="/assets/js/114.decba05a.js"><link rel="prefetch" href="/assets/js/115.2db94b7b.js"><link rel="prefetch" href="/assets/js/116.90a64bf4.js"><link rel="prefetch" href="/assets/js/117.23d35494.js"><link rel="prefetch" href="/assets/js/118.47c182d8.js"><link rel="prefetch" href="/assets/js/119.5ff673f9.js"><link rel="prefetch" href="/assets/js/12.0ed640a1.js"><link rel="prefetch" href="/assets/js/120.92e75de2.js"><link rel="prefetch" href="/assets/js/121.7e97bf0f.js"><link rel="prefetch" href="/assets/js/122.c2faa5b2.js"><link rel="prefetch" href="/assets/js/123.8ae9105b.js"><link rel="prefetch" href="/assets/js/124.26c930f2.js"><link rel="prefetch" href="/assets/js/125.c343cfda.js"><link rel="prefetch" href="/assets/js/126.a8df235a.js"><link rel="prefetch" href="/assets/js/127.4a348d82.js"><link rel="prefetch" href="/assets/js/128.0063f5b6.js"><link rel="prefetch" href="/assets/js/129.0684ae23.js"><link rel="prefetch" href="/assets/js/13.9b870990.js"><link rel="prefetch" href="/assets/js/130.c932cc50.js"><link rel="prefetch" href="/assets/js/131.4e2fe734.js"><link rel="prefetch" href="/assets/js/132.28afb4d9.js"><link rel="prefetch" href="/assets/js/133.e1bc19d7.js"><link rel="prefetch" href="/assets/js/134.5e7a52d1.js"><link rel="prefetch" href="/assets/js/135.dac10c72.js"><link rel="prefetch" href="/assets/js/136.73db4c6b.js"><link rel="prefetch" href="/assets/js/137.24e7a5c9.js"><link rel="prefetch" href="/assets/js/138.7cfb25cb.js"><link rel="prefetch" href="/assets/js/139.42d2a8fa.js"><link rel="prefetch" href="/assets/js/14.4794068b.js"><link rel="prefetch" href="/assets/js/140.bdb33e9a.js"><link rel="prefetch" href="/assets/js/141.47e372fd.js"><link rel="prefetch" href="/assets/js/142.b2ee056c.js"><link rel="prefetch" href="/assets/js/143.f02e8317.js"><link rel="prefetch" href="/assets/js/144.6b12b788.js"><link rel="prefetch" href="/assets/js/145.fcfb5079.js"><link rel="prefetch" href="/assets/js/146.e0c47b52.js"><link rel="prefetch" href="/assets/js/147.7665455c.js"><link rel="prefetch" href="/assets/js/148.20fd9952.js"><link rel="prefetch" href="/assets/js/149.dfd05b01.js"><link rel="prefetch" href="/assets/js/15.e392c70f.js"><link rel="prefetch" href="/assets/js/150.9f8c270f.js"><link rel="prefetch" href="/assets/js/151.9afeef43.js"><link rel="prefetch" href="/assets/js/152.6933482a.js"><link rel="prefetch" href="/assets/js/153.e65e43a4.js"><link rel="prefetch" href="/assets/js/154.28391de9.js"><link rel="prefetch" href="/assets/js/155.d95701eb.js"><link rel="prefetch" href="/assets/js/156.749f7732.js"><link rel="prefetch" href="/assets/js/16.019de8ce.js"><link rel="prefetch" href="/assets/js/17.c628a80f.js"><link rel="prefetch" href="/assets/js/18.4ab7403e.js"><link rel="prefetch" href="/assets/js/19.ae2840ee.js"><link rel="prefetch" href="/assets/js/20.09f9c6ec.js"><link rel="prefetch" href="/assets/js/21.4b8a4546.js"><link rel="prefetch" href="/assets/js/22.9ab8af85.js"><link rel="prefetch" href="/assets/js/23.4e51bd27.js"><link rel="prefetch" href="/assets/js/24.297c5891.js"><link rel="prefetch" href="/assets/js/25.96b34fa3.js"><link rel="prefetch" href="/assets/js/26.75dd9db7.js"><link rel="prefetch" href="/assets/js/27.32f2ebbc.js"><link rel="prefetch" href="/assets/js/28.87e0f3e3.js"><link rel="prefetch" href="/assets/js/29.a8869a85.js"><link rel="prefetch" href="/assets/js/3.95140222.js"><link rel="prefetch" href="/assets/js/30.9fa7fb8c.js"><link rel="prefetch" href="/assets/js/31.7d7e60c3.js"><link rel="prefetch" href="/assets/js/32.e738efc8.js"><link rel="prefetch" href="/assets/js/33.747e685b.js"><link rel="prefetch" href="/assets/js/34.0a3b552f.js"><link rel="prefetch" href="/assets/js/35.75e34b3f.js"><link rel="prefetch" href="/assets/js/36.32a7b934.js"><link rel="prefetch" href="/assets/js/37.7755aba0.js"><link rel="prefetch" href="/assets/js/38.236a265f.js"><link rel="prefetch" href="/assets/js/39.64d08d4e.js"><link rel="prefetch" href="/assets/js/40.36314885.js"><link rel="prefetch" href="/assets/js/41.4cce3a1c.js"><link rel="prefetch" href="/assets/js/42.b53de554.js"><link rel="prefetch" href="/assets/js/43.7708df51.js"><link rel="prefetch" href="/assets/js/44.a5a36f06.js"><link rel="prefetch" href="/assets/js/45.1fdf9d60.js"><link rel="prefetch" href="/assets/js/46.39c7ca11.js"><link rel="prefetch" href="/assets/js/47.ea4a708d.js"><link rel="prefetch" href="/assets/js/48.62ec3abf.js"><link rel="prefetch" href="/assets/js/49.8a57f5f7.js"><link rel="prefetch" href="/assets/js/5.44d1fb4e.js"><link rel="prefetch" href="/assets/js/50.358979c6.js"><link rel="prefetch" href="/assets/js/51.369a4732.js"><link rel="prefetch" href="/assets/js/52.703082e6.js"><link rel="prefetch" href="/assets/js/53.27264aee.js"><link rel="prefetch" href="/assets/js/54.733a10fa.js"><link rel="prefetch" href="/assets/js/55.486cd4d0.js"><link rel="prefetch" href="/assets/js/56.e2bdcab7.js"><link rel="prefetch" href="/assets/js/57.015de866.js"><link rel="prefetch" href="/assets/js/58.89ab3d68.js"><link rel="prefetch" href="/assets/js/59.d2e7960e.js"><link rel="prefetch" href="/assets/js/6.67cc1f3f.js"><link rel="prefetch" href="/assets/js/60.02d2da05.js"><link rel="prefetch" href="/assets/js/61.cff833b9.js"><link rel="prefetch" href="/assets/js/62.15d2429b.js"><link rel="prefetch" href="/assets/js/63.96e9cfe8.js"><link rel="prefetch" href="/assets/js/64.d19ee82c.js"><link rel="prefetch" href="/assets/js/65.979cac10.js"><link rel="prefetch" href="/assets/js/66.7542b4a5.js"><link rel="prefetch" href="/assets/js/67.b9580df6.js"><link rel="prefetch" href="/assets/js/68.29872d2c.js"><link rel="prefetch" href="/assets/js/69.83c2b112.js"><link rel="prefetch" href="/assets/js/7.30873a64.js"><link rel="prefetch" href="/assets/js/70.fd4ed156.js"><link rel="prefetch" href="/assets/js/71.36af5483.js"><link rel="prefetch" href="/assets/js/72.6d686b92.js"><link rel="prefetch" href="/assets/js/73.b3b74d9d.js"><link rel="prefetch" href="/assets/js/74.3f129e62.js"><link rel="prefetch" href="/assets/js/75.4e93e65b.js"><link rel="prefetch" href="/assets/js/76.e137a1da.js"><link rel="prefetch" href="/assets/js/77.614596eb.js"><link rel="prefetch" href="/assets/js/78.5f7f1438.js"><link rel="prefetch" href="/assets/js/79.a14cbf13.js"><link rel="prefetch" href="/assets/js/8.988484b0.js"><link rel="prefetch" href="/assets/js/80.a7a91bf8.js"><link rel="prefetch" href="/assets/js/81.2091dd76.js"><link rel="prefetch" href="/assets/js/82.329755fd.js"><link rel="prefetch" href="/assets/js/83.fac501f1.js"><link rel="prefetch" href="/assets/js/84.b6ad5c3e.js"><link rel="prefetch" href="/assets/js/85.f89c7736.js"><link rel="prefetch" href="/assets/js/86.afed2f14.js"><link rel="prefetch" href="/assets/js/87.4f9893b2.js"><link rel="prefetch" href="/assets/js/88.97f8ae06.js"><link rel="prefetch" href="/assets/js/89.7a183e65.js"><link rel="prefetch" href="/assets/js/90.1770f69b.js"><link rel="prefetch" href="/assets/js/91.771dc0cf.js"><link rel="prefetch" href="/assets/js/92.bbdc5f4f.js"><link rel="prefetch" href="/assets/js/93.fa43b929.js"><link rel="prefetch" href="/assets/js/94.eab46fc5.js"><link rel="prefetch" href="/assets/js/95.b66955fe.js"><link rel="prefetch" href="/assets/js/96.8d5a62c9.js"><link rel="prefetch" href="/assets/js/97.b61dadc3.js"><link rel="prefetch" href="/assets/js/98.6738592b.js"><link rel="prefetch" href="/assets/js/99.e1197f64.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8c98fca4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/about/" class="nav-link">About</a></div><div class="nav-item"><a href="/author/" class="nav-link">Author</a></div><div class="nav-item"><a href="/articles/" class="nav-link">Blog</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/about/" class="nav-link">About</a></div><div class="nav-item"><a href="/author/" class="nav-link">Author</a></div><div class="nav-item"><a href="/articles/" class="nav-link">Blog</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Great E2E testing with Cypress</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/cypress.html#references" class="sidebar-link">References</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/cypress.html#what" class="sidebar-link">WHAT</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/cypress.html#why" class="sidebar-link">WHY</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/cypress.html#installing-cypress" class="sidebar-link">Installing Cypress</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/cypress.html#starting-cypress" class="sidebar-link">Starting Cypress</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/cypress.html#our-first-test" class="sidebar-link">Our first test</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/cypress.html#a-real-test" class="sidebar-link">A real test</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/cypress.html#visit" class="sidebar-link">Visit</a></li><li class="sidebar-sub-header"><a href="/pages/cypress.html#query-for-an-element" class="sidebar-link">Query for an element</a></li><li class="sidebar-sub-header"><a href="/pages/cypress.html#interact" class="sidebar-link">Interact</a></li><li class="sidebar-sub-header"><a href="/pages/cypress.html#assert" class="sidebar-link">Assert</a></li></ul></li><li><a href="/pages/cypress.html#debugging" class="sidebar-link">Debugging</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/cypress.html#cy-pause" class="sidebar-link">cy.pause()</a></li><li class="sidebar-sub-header"><a href="/pages/cypress.html#inline-code-mocking" class="sidebar-link">Inline code Mocking</a></li><li class="sidebar-sub-header"><a href="/pages/cypress.html#fixtures" class="sidebar-link">Fixtures</a></li></ul></li><li><a href="/pages/cypress.html#adding-cypress-to-your-spa-app" class="sidebar-link">Adding Cypress to your SPA app</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/cypress.html#scaffold-our-app" class="sidebar-link">Scaffold our app</a></li><li class="sidebar-sub-header"><a href="/pages/cypress.html#install-cypress" class="sidebar-link">Install Cypress</a></li><li class="sidebar-sub-header"><a href="/pages/cypress.html#set-up-package-json" class="sidebar-link">Set up package.json</a></li><li class="sidebar-sub-header"><a href="/pages/cypress.html#write-some-tests" class="sidebar-link">Write some tests</a></li><li class="sidebar-sub-header"><a href="/pages/cypress.html#start-up-everything" class="sidebar-link">Start up everything</a></li></ul></li><li><a href="/pages/cypress.html#typescript" class="sidebar-link">TypeScript</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/cypress.html#screenshots" class="sidebar-link">Screenshots</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/cypress.html#summary" class="sidebar-link">Summary</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="great-e2e-testing-with-cypress"><a href="#great-e2e-testing-with-cypress" aria-hidden="true" class="header-anchor">#</a> Great E2E testing with Cypress</h1> <p>Follow me on <a href="https://twitter.com/chris_noring" target="_blank" rel="noopener noreferrer">Twitter<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, happy to take your suggestions on topics or improvements /Chris</p> <p><img src="https://thepracticaldev.s3.amazonaws.com/i/gvef5c5trkkaf09me6h0.jpg" alt=""></p> <blockquote><p>Testing is a necessary thing, yet are tools we use for testing aren't great which leads to us both authoring and running tests less than we should. Why can't we have a great tool for testing? Well we can - with Cypress</p></blockquote> <p>TLDR; The test tool of the future is here. It sounds like a dream, read on and I'm sure by the end of the article you will agree with me. Cypress - a test runner built for humans.</p> <h2 id="references"><a href="#references" aria-hidden="true" class="header-anchor">#</a> References</h2> <ul><li><a href="https://docs.cypress.io/guides/guides/launching-browsers.html" target="_blank" rel="noopener noreferrer">How Cypress controls a Browser<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
If you are interested in knowing more how Cypress deals with Browsers than this is a good page</li> <li><a href="https://www.cypress.io/how-it-works" target="_blank" rel="noopener noreferrer">How Cypress works<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
Great doc page that explains how Cypress works under the hood</li> <li><a href="https://github.com/softchris/cypress-demo" target="_blank" rel="noopener noreferrer">Angular + Cypress repo<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
You can easily take the Cypress tests and build a similar app in Vue or React, that's the beauty of Cypress.</li> <li><a href="https://docs.cypress.io/guides/getting-started/installing-cypress.html" target="_blank" rel="noopener noreferrer">Installing Cypress<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://docs.cypress.io/guides/getting-started/writing-your-first-test.html" target="_blank" rel="noopener noreferrer">Writing your first test with Cypress<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>[Testing strategies](https://docs.cypress.io/guides/guides/network-requests.html#Testing-Strategies
https://docs.cypress.io/api/api/table-of-contents.html)
It's always good to think of the approach to use when testing</li></ul> <h2 id="what"><a href="#what" aria-hidden="true" class="header-anchor">#</a> WHAT</h2> <p>Cypress is a testing tool that greatly improves your testing experience. It offers features such as:</p> <ul><li><strong>Time travel</strong>, it takes snapshots of your tests as you run the tests. This enables you to easily hover over each command that took place in your test</li> <li><strong>Debuggability</strong>, Debug directly from familiar tools like Chrome DevTools. Our readable errors and stack traces make debugging lightning fast</li> <li><strong>Real-time reloads</strong>, Cypress automatically reloads whenever you make changes to your tests. See commands execute in real-time in your app.</li> <li><strong>Automatic waiting</strong>, Never add waits or sleeps to your tests. Cypress automatically waits for commands and assertions before moving on - <em>No more async hell</em>.</li> <li><strong>Spies, stubs, and clocks</strong>, Verify and control the behavior of functions, server responses, or timers. The same functionality you love from unit testing is right at your fingertips.</li> <li><strong>Consistent results</strong>, Our architecture doesn’t use Selenium or WebDriver. Say hello to fast, consistent and reliable tests that are flake-free.</li> <li><strong>Network traffic control</strong>, Easily control, stub, and test edge cases without involving your server. You can stub network traffic however you like.</li> <li><strong>Screenshots and videos</strong>, View screenshots taken automatically on failure, or videos of your entire test suite when running headlessly.</li></ul> <h2 id="why"><a href="#why" aria-hidden="true" class="header-anchor">#</a> WHY</h2> <p>Testing today doesn't feel like a first-class citizen. We often have a great looking IDE for writing code but authoring and running tests feels lacking - like an afterthought. We need testing to feel confident in what we are building but we should have a right to expect first-class tools.</p> <p>One problem with E2E tests is that they are flaky. Cypress offers a great test runner, that's not flaky, for running Unit as well as E2E tests, the future is here.</p> <h2 id="installing-cypress"><a href="#installing-cypress" aria-hidden="true" class="header-anchor">#</a> Installing Cypress</h2> <p>You want to install Cypress as a dependency to your project. Make sure <code>npm init</code> has been run. I usually go with the <em>smart defaults</em> option:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm init -y
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Then install Cypress with:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm install cypress
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>It's possibly to use Yarn as well:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>yarn add cypress --dev
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Your executable now exist on:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>./node_modules/.bin/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="starting-cypress"><a href="#starting-cypress" aria-hidden="true" class="header-anchor">#</a> Starting Cypress</h2> <p>You want to be calling <code>cypress open</code> to start Cypress. You can do so in one of the following ways:</p> <ol><li><code>./node_modules/.bin/cypress open</code></li> <li><code>$(npm bin)/cypress open</code></li> <li><code>npx cypress open</code> for NPM version &gt; 5.4, or <code>npx</code> installed separately</li> <li><code>yarn run cypress open</code></li></ol> <p>We'll go with <code>npx cypress open</code>:</p> <p><img src="https://thepracticaldev.s3.amazonaws.com/i/bvti2o2xxpcay71vemx3.png" alt=""></p> <p>This also pops up a window, looking like this:</p> <p><img src="https://thepracticaldev.s3.amazonaws.com/i/ypopdypilnfc8u0zqsue.png" alt=""></p> <p>According to the header text it has added test samples. Let's have a look at our project structure</p> <p><img src="https://thepracticaldev.s3.amazonaws.com/i/nk2j8y7v59poet5v58y7.png" alt=""></p> <p>Above we see that we got a directory <code>cypress</code> containing an <code>integration</code> subfolder, like so:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>-| cypress/
---| integration
------| examples
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Looking at the content of the <code>examples</code> folder we can see that it contains everything we could possibly want to know how to do like:</p> <ul><li>writing tests</li> <li>mock APIs</li> <li>different assertions</li> <li>aliases</li></ul> <p>and much much more. This is great, we will have a lot of reasons to return back, but first we need to learn how to crawl. So where to start?</p> <h2 id="our-first-test"><a href="#our-first-test" aria-hidden="true" class="header-anchor">#</a> Our first test</h2> <p>Let's create a new file <code>sample_spec.js</code> under the <code>cypress/integration</code> folder:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>- | cypress
---| integration
------| sample_spec.js
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Upon creating the file, it gets picked up by our test runner, that's still running:</p> <p><img src="https://thepracticaldev.s3.amazonaws.com/i/bbqvixvt1dcjrwtfhdte.png" alt=""></p> <p>Let's add the following content to <code>sample_spec.js</code>:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'My First Test'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'Does not do much!'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Let's save the content and let's click the test in our test runner. Doing so should produce the following window:</p> <p><img src="https://thepracticaldev.s3.amazonaws.com/i/3h9e3wv0vjzndvd2h0q7.png" alt=""></p> <p>We have a passing test 😃</p> <p>We can easily make it fail by changing the code:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'My First Test'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'Does not do much!'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>As soon as we save the code - the runner now displays this:</p> <p><img src="https://thepracticaldev.s3.amazonaws.com/i/v51ry2669ko9d4hdwkg9.png" alt=""></p> <h2 id="a-real-test"><a href="#a-real-test" aria-hidden="true" class="header-anchor">#</a> A real test</h2> <p>Let's write something more real looking. So far we tested <code>true</code> vs <code>true</code>. While that technically is a <em>a test</em> - we wanted to show what Cypress really can do. So let's test out its capability on a web page.</p> <p>Our high-level approach looks like so:</p> <ol><li><strong>Visit</strong> a web page.</li> <li><strong>Query</strong> for an element.</li> <li><strong>Interact</strong> with that element.</li> <li><strong>Assert</strong> about the content on the page.</li></ol> <h3 id="visit"><a href="#visit" aria-hidden="true" class="header-anchor">#</a> Visit</h3> <p>Cypress has provided as with numerous helpers to make the above really easy to achieve. First, let's set up a test suite with a test in it. Let's create a file <code>page_spec.js</code> under our <code>integration</code> folder</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>-| cypress/
---| integration/
------| page_spec.js
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Now, give it the below content:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'My First Test'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'Visits page'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    cy<span class="token punctuation">.</span><span class="token function">visit</span><span class="token punctuation">(</span><span class="token string">'https://example.cypress.io'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>We can see that we use the global object <code>cy</code> and the helper method <code>visit()</code> to go to a page.</p> <p>Per usual our <code>Visits page</code> test shows up and we are able to click it. Now we are faced with the following UI:</p> <p><img src="https://thepracticaldev.s3.amazonaws.com/i/gh608lx54t1scsjehftk.png" alt=""></p> <p>On our left, we see our test suite, test and what action we are currently on aka <code>VISIT</code> and to our right we see the result of carrying out said action, which is the webpage we navigated to.</p> <h3 id="query-for-an-element"><a href="#query-for-an-element" aria-hidden="true" class="header-anchor">#</a> Query for an element</h3> <p>Now let's find an element. There are many helpers that help you find an element but let's find this one by content:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>cy.contains('type')
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Let's add this to our code so our test now reads:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'My First Test'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'Visits page'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    cy<span class="token punctuation">.</span><span class="token function">visit</span><span class="token punctuation">(</span><span class="token string">'https://example.cypress.io'</span><span class="token punctuation">)</span>
    cy<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">'type'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Let's save this. Note how our test runner now says:</p> <p><img src="https://thepracticaldev.s3.amazonaws.com/i/4em1jilqdcl6tgry11xb.png" alt=""></p> <p>Above we see our <code>cy.contains()</code> created a <code>CONTAINS</code> action on our left. On our right, we see how the element is <em>highlighted</em> that matches our <code>cy.contains()</code>.</p> <h3 id="interact"><a href="#interact" aria-hidden="true" class="header-anchor">#</a> Interact</h3> <p>Next step is to interact with our UI and specifically with our found element, so let's click it, like so:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>cy<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">'type'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Let's save this. You should have the below result:</p> <p><img src="https://thepracticaldev.s3.amazonaws.com/i/v8xgdtz25pccpzl68in5.png" alt=""></p> <p>Clicking our <code>type</code> element expanded it and it's now showing us a lot of content that we can assert on.</p> <h3 id="assert"><a href="#assert" aria-hidden="true" class="header-anchor">#</a> Assert</h3> <p>Ok then. There are more than one thing we could assert on here:</p> <ul><li><strong>URL</strong>, our URL actually changed from us clicking this element</li> <li><strong>Content</strong>, new content is being shown, let's assert it's the correct content</li></ul> <p>To assert on the URL we can use the helper <code>cy.url().should('include', '&lt;something&gt;')</code>. We are using multiple helpers here:</p> <ul><li><code>cy.url()</code>, this helps us grab the URL</li> <li><code>.should()</code>, this is an assertion</li> <li><code>include</code>, this is a keyword telling us what part of the URL should be matched against our desired output</li></ul> <p>In our case, we want the expression to read:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>cy.url().should('include', '/commands/actions')
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>which means that we want the URL to <em>contain</em> <code>/commands/actions</code></p> <p>What about other types of assertions, like input elements? For that, we can use the <code>cy.get()</code> helper, like so:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>cy.get('.action-email')
    .should('have.value', '&lt;some value&gt;')
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Above we are getting the email by CSS class.</p> <p>Let's add the above assertions to our test so the test now reads:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'page test - suite'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'Visits page'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    cy<span class="token punctuation">.</span><span class="token function">visit</span><span class="token punctuation">(</span><span class="token string">'https://example.cypress.io'</span><span class="token punctuation">)</span>
    cy<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">'type'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    cy<span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">'include'</span><span class="token punctuation">,</span> <span class="token string">'/commands/actions'</span><span class="token punctuation">)</span>

    cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'.action-email'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">'have.value'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>Let's save this new code. You should get the below update in the UI as the test is rerun.</p> <p><img src="https://thepracticaldev.s3.amazonaws.com/i/h3ylyghm4nxtate2prwy.png" alt=""></p> <p>As we can see it is able to correctly assert on the URL as well as the element.</p> <p>Let's try to change the content of the input element though, just to ensure it gets properly updated (Yes I have messed that up in every single SPA framework I've coded with 😃 ).</p> <p>To enter content into an input element using the helper <code>.type()</code>, like so:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'.action-email'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">'fake@email.com'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">'have.value'</span><span class="token punctuation">,</span> <span class="token string">'fake@email.com'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Saving this, and having the test re-run, results in the following:</p> <p><img src="https://thepracticaldev.s3.amazonaws.com/i/o9hhetuq53l6bdpzz078.png" alt=""></p> <p>We see above that it types into our text element, so yes we didn't mess up the 2-way, unidirectional data-flow that we were using with our SPA (our we could have been using Vanilla JS 😉 )</p> <h2 id="debugging"><a href="#debugging" aria-hidden="true" class="header-anchor">#</a> Debugging</h2> <p>Ok, so we've learned a bit above on how to author and run our tests and everything went mostly green. What if it doesn't though, what if we have problems? For that, we can use the excellent debug support in the form of Time traveling and Snapshots. For every single action carried out you can freely go back and forth between snapshots. Let's demonstrate this</p> <p><img src="https://thepracticaldev.s3.amazonaws.com/i/y2b7iq93toexnc89rhnp.gif" alt=""></p> <p>Additionally to our Snapshots, we can use two additional commands:</p> <ul><li><code>cy.pause()</code>, this gives us the ability to pause on a specific place in our test</li> <li><code>cy.debug()</code></li></ul> <h3 id="cy-pause"><a href="#cy-pause" aria-hidden="true" class="header-anchor">#</a> cy.pause()</h3> <p>By adding this in the code like so, for example:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'page test - suite'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'Visits page'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    cy<span class="token punctuation">.</span><span class="token function">visit</span><span class="token punctuation">(</span><span class="token string">'https://example.cypress.io'</span><span class="token punctuation">)</span>
    cy<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">'type'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    cy<span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">'include'</span><span class="token punctuation">,</span> <span class="token string">'/commands/actions'</span><span class="token punctuation">)</span>

    cy<span class="token punctuation">.</span><span class="token function">pause</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'.action-email'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">'have.value'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>

      cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'.action-email'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">'fake@email.com'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">'have.value'</span><span class="token punctuation">,</span> <span class="token string">'fake@email.com'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>We code the test execution to halt, like below:</p> <p><img src="https://thepracticaldev.s3.amazonaws.com/i/pzsstx4a0jpm42e6t4l6.png" alt=""></p> <p>As you can see from the above picture, we also get a control panel that indicates what state we are in <em>paused</em>, a <em>play</em> button to resume the test run and also a <code>step</code> button to the right that allows us to step each line of code in our test.</p> <p>### cy.debug()</p> <p>What if we replace our <code>cy.pause()</code> for <code>cy.debug()</code>? Well, that works a bit differently. If you pull up developer tools the code will halt on <code>debugger</code> line like so:</p> <p><img src="https://thepracticaldev.s3.amazonaws.com/i/l0u6g2atbz11gn3g2xrm.png" alt=""></p> <p>If you go to the console you get some additional logging, like so:</p> <p><img src="https://thepracticaldev.s3.amazonaws.com/i/vu0djparg077jmsy2gi5.png" alt=""></p> <p>So this is an additional way of getting Developer Tools to help out debugging whatever your issue is.</p> <p>## Mocking</p> <p><em>Mocking</em> is an interesting topic. It's interesting because this is about what kind of tests we want to write. If we Mock the backend do we actually have a true E2E test? No we don't but there is still value to mock certain endpoints of your entire backend just to make sure we can easily test certain scenarios. So let's talk about how we can achieve that.</p> <p>There are two ways we could be mocking:</p> <ol><li><strong>Inline code Mocking</strong>, this means we will intercept a certain route call and answer with a javascript object</li> <li><strong>Fixtures</strong>, this is essentially the same as above but instead of having the response as JavaScript code we point to a JSON file</li></ol> <h3 id="inline-code-mocking"><a href="#inline-code-mocking" aria-hidden="true" class="header-anchor">#</a> Inline code Mocking</h3> <p>First we need to call <code>cy.server()</code>, this will tell Cypress we allow mocking to happen. Next, we tell it what endpoint to mock, like so:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>cy<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  method<span class="token punctuation">:</span> <span class="token string">'GET'</span><span class="token punctuation">,</span>
  url<span class="token punctuation">:</span> <span class="token string">'http://localhost:3000/products'</span><span class="token punctuation">,</span> 
  response<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    title<span class="token punctuation">:</span> <span class="token string">'Mocked Tomato'</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>The above is quite readable but let's explain it anyway:</p> <ul><li><strong>method</strong>, this is the HTTP method we mean to listen to</li> <li><strong>url</strong>, this is simply the URL, we can match it exactly like above or use a more wildcard matching with <code>*</code></li> <li><strong>response</strong>, this is where we specify the response we want instead of letting the actual API call go through</li></ul> <blockquote><p>This doesn't feel quite nice though. Sure, it works, but it feels like we can do this better. We can, with fixtures</p></blockquote> <h3 id="fixtures"><a href="#fixtures" aria-hidden="true" class="header-anchor">#</a> Fixtures</h3> <p>There are a few things we need to know about this one:</p> <ul><li>fixtures are JSON files</li> <li>Cypress automatically looks in the <code>fixtures</code> directory for fixtures</li> <li>You can create whatever subdirectories you need and Cypress can find them</li></ul> <p>Let's show how it can look. Given the following directory structure:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>-| cypress/
---| fixtures/
------| heroes/
---------| list.json
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>and the following content of <code>list.json</code>:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">[</span><span class="token punctuation">{</span>
  <span class="token property">&quot;id&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;title&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Sir Mockalot&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>we can now instruct cypress to use the above JSON file like so:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>cy<span class="token punctuation">.</span><span class="token function">fixture</span><span class="token punctuation">(</span><span class="token string">'heroes/list.json'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span><span class="token string">'heroesList'</span><span class="token punctuation">)</span>
cy<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'http://localhost:3000/products'</span><span class="token punctuation">,</span> <span class="token string">'@heroesList'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>the call to <code>cy.fixture()</code> says where my JSON file is relative to <code>/fixtures</code> and we und by creating an <em>alias</em> <code>heroesList</code> that we can use in the next line. The call to <code>cy.route()</code> does the same as before but we have to type less. It first takes an HTTP verb, followed by what URL to mock and lastly it takes our <em>alias</em>. Note, how we prefix the alias with <code>@</code>.</p> <blockquote><p>Just imagine the possibilities being able to specify all the possible scenarios you might need.</p></blockquote> <p>The million-dollar question is where to place our code? Well, the answer is where it's needed. It should before the endpoint is being called. So let's say the above endpoint is being hit when loading the page then the following code would be correct:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>cy<span class="token punctuation">.</span><span class="token function">fixture</span><span class="token punctuation">(</span><span class="token string">'heroes/list.json'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span><span class="token string">'heroesList'</span><span class="token punctuation">)</span>
cy<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'http://localhost:3000/products'</span><span class="token punctuation">,</span> <span class="token string">'@heroesList'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

cy<span class="token punctuation">.</span><span class="token function">visit</span><span class="token punctuation">(</span><span class="token string">'http://localhost:4200'</span><span class="token punctuation">)</span>
cy<span class="token punctuation">.</span><span class="token function">server</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="adding-cypress-to-your-spa-app"><a href="#adding-cypress-to-your-spa-app" aria-hidden="true" class="header-anchor">#</a> Adding Cypress to your SPA app</h2> <p>Now, its quite easy to add Cypress to any SPA app out there, it's that good. Let's use Angular as an example, but feel free to apply it to React, Vue or Svelte. We will do the following:</p> <ol><li><strong>Scaffold</strong> an Angular project</li> <li><strong>Install</strong> Cypress</li> <li><strong>Set up</strong> package.json</li> <li><strong>Write</strong> some tests</li> <li><strong>Startup</strong> everything</li></ol> <h3 id="scaffold-our-app"><a href="#scaffold-our-app" aria-hidden="true" class="header-anchor">#</a> Scaffold our app</h3> <p>In Angular this is as easy as calling:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>ng new &lt;name of my project&gt;
cd &lt;name of my project&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="install-cypress"><a href="#install-cypress" aria-hidden="true" class="header-anchor">#</a> Install Cypress</h3> <p>Installing Cypress is accomplished with the following command:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm install cypress --save-dev
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="set-up-package-json"><a href="#set-up-package-json" aria-hidden="true" class="header-anchor">#</a> Set up package.json</h3> <p>We want to be able to start up our app and Cypress at the same time. There are many ways to do this but a popular option is using the library <code>concurrently</code>, which we can install with:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm install concurrently
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Let's now set up a task in <code>package.json</code> and our <code>scripts</code> section, like so:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;cypress&quot;</span><span class="token operator">:</span> <span class="token string">&quot;concurrently \&quot;ng serve\&quot; \&quot;cypress open\&quot; \&quot;json-server --watch db.json\&quot;&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>above you can see how we use <code>concurrently</code> to start the angular app with <code>ng server</code>, followed by starting Cypress with <code>cypress open</code> and lastly starting up our API with <code>json-server --watch db.json</code>. Now, if you have a real API use whatever command you need to start that up instead. We just use <code>json-server</code> as a simple way to pretend we have a real API.</p> <h3 id="write-some-tests"><a href="#write-some-tests" aria-hidden="true" class="header-anchor">#</a> Write some tests</h3> <p>Ok, let's write some tests given the following app:</p> <p><img src="https://thepracticaldev.s3.amazonaws.com/i/h1ipvi53qdc7bg86bxng.png" alt=""></p> <p>This is a simple <em>todo</em> app, we can:</p> <ul><li><strong>Add</strong> items</li> <li><strong>Update</strong> Item</li> <li><strong>Delete</strong> item</li></ul> <p><strong>Add item to list</strong></p> <p>For this test, we enter a value in a textbox. Then we click a button to add the item and lastly, we assert that the textbox we used for input has been cleared and that the added item exists in the list.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should add Hulk to list'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  cy<span class="token punctuation">.</span><span class="token function">visit</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:4200&quot;</span><span class="token punctuation">)</span>
  cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;.new-hero&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">&quot;Hulk&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">&quot;have.value&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Hulk&quot;</span><span class="token punctuation">)</span>

  cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;.new-hero-add&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  
  cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;.new-hero&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">&quot;have.value&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;.hero-input&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">&quot;have.value&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Hulk&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><strong>Assert we have 2 items in a list</strong></p> <p>This just ensures we have 2 items in a list. We grab a reference to the list element and checks that its length is <code>2</code>.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should have list with length 2'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  cy<span class="token punctuation">.</span><span class="token function">visit</span><span class="token punctuation">(</span><span class="token string">'http://localhost:4200'</span><span class="token punctuation">)</span>
  cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;.hero-input&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">its</span><span class="token punctuation">(</span><span class="token string">'length'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">&quot;eq&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>Update item in list</strong></p> <p>Here we change an item in the list, then we click to update the item and lastly we assert that the item has been updated.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should update our item'</span> <span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  cy<span class="token punctuation">.</span><span class="token function">visit</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:4200&quot;</span><span class="token punctuation">)</span>
  cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;.hero-input&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">&quot;have.value&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Captain Marvel&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">&quot;s&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">;</span>

  cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'.hero-update'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;.hero-input&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">&quot;have.value&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Captain Marvels&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><strong>Delete item</strong></p> <p>This is about locating an item at a specific index in the list. Then we click the corresponding delete button. Lastly, we assert and ensure that our item is removed from the list.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should remove our item'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  cy<span class="token punctuation">.</span><span class="token function">visit</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:4200&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;.hero-remove&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;.hero-input&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">its</span><span class="token punctuation">(</span><span class="token string">&quot;length&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">&quot;eq&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="start-up-everything"><a href="#start-up-everything" aria-hidden="true" class="header-anchor">#</a> Start up everything</h3> <p>To start everything up we call:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm run cypress
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>To see the full source code of the Angular project with accompanying tests have a look at the following repo.</p> <blockquote><p>https://github.com/softchris/cypress-demo</p></blockquote> <h2 id="typescript"><a href="#typescript" aria-hidden="true" class="header-anchor">#</a> TypeScript</h2> <p>Most of the major SPA frameworks today support Typescript. Typescript doesn't always make sense for your project and it's up to you if you want to add it. Remember, you can gradually add parts of it where it makes sense.</p> <blockquote><p>So how easy is it to add TypeScript to my Cypress tests?</p></blockquote> <p>Very easy, the reason for that is that Cypress ships with TypeScript types. The only thing you need is a <code>tsconfig.json</code> file with the following content:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;strict&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;baseUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;../node_modules&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token string">&quot;es5&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lib&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;es5&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;dom&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;types&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;cypress&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;include&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;**/*.ts&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>With that in place auto-complete will work fine like so:</p> <p><img src="https://thepracticaldev.s3.amazonaws.com/i/tpdx9ewubzm8k1bp4vyc.png" alt=""></p> <h2 id="screenshots"><a href="#screenshots" aria-hidden="true" class="header-anchor">#</a> Screenshots</h2> <p>Finally, let's talk about something really amazing, namely screenshots, that you get for free. All you need is a call to <code>cy.screenshot()</code>. If you place in a lifecycle method like <code>beforeEach()</code> it will produce a screenshot for each test in that test suite.</p> <p>Screenshots are places in the <code>screenshots</code> directory by default.</p> <p>Below we have an example where we have invoked the following in <code>list_spec.js</code>:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    cy<span class="token punctuation">.</span><span class="token function">screenshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><img src="https://thepracticaldev.s3.amazonaws.com/i/o0604wl3p6ngv1mbfvu7.png" alt=""></p> <h2 id="summary"><a href="#summary" aria-hidden="true" class="header-anchor">#</a> Summary</h2> <p>This has been a somewhat long article but hopefully, you've seen what Cypress can do. To be honest I've only shown you a small fraction. You as a developer, deserve not only a great IDE to code in but also an outstanding test runner. I promise you, give Cypress a chance and next you will volunteer to write tests.</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.bc4509b6.js" defer></script><script src="/assets/js/9.20ba5650.js" defer></script><script src="/assets/js/4.b33b06f6.js" defer></script><script src="/assets/js/103.89772e5e.js" defer></script>
  </body>
</html>
