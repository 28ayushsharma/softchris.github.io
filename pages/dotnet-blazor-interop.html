<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Learn how YOU can use both C# and JavaScript in your .NET Core Blazor app with the JavaScript interop</title>
    <meta name="description" content="[object Object]">
    <head link="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-abap.js"></head>
    
    <link rel="preload" href="/assets/css/0.styles.8c98fca4.css" as="style"><link rel="preload" href="/assets/js/app.bc4509b6.js" as="script"><link rel="preload" href="/assets/js/9.20ba5650.js" as="script"><link rel="preload" href="/assets/js/4.b33b06f6.js" as="script"><link rel="preload" href="/assets/js/112.c1f25142.js" as="script"><link rel="prefetch" href="/assets/js/1.76e1fa2c.js"><link rel="prefetch" href="/assets/js/10.51dda52b.js"><link rel="prefetch" href="/assets/js/100.467626d3.js"><link rel="prefetch" href="/assets/js/101.86d99a29.js"><link rel="prefetch" href="/assets/js/102.095cd8f0.js"><link rel="prefetch" href="/assets/js/103.89772e5e.js"><link rel="prefetch" href="/assets/js/104.cff87ef0.js"><link rel="prefetch" href="/assets/js/105.e9f14a21.js"><link rel="prefetch" href="/assets/js/106.c2d324ee.js"><link rel="prefetch" href="/assets/js/107.e56bde0a.js"><link rel="prefetch" href="/assets/js/108.afe1f818.js"><link rel="prefetch" href="/assets/js/109.bdab2a38.js"><link rel="prefetch" href="/assets/js/11.836ffd95.js"><link rel="prefetch" href="/assets/js/110.d3172a8a.js"><link rel="prefetch" href="/assets/js/111.46445704.js"><link rel="prefetch" href="/assets/js/113.49fa1ce6.js"><link rel="prefetch" href="/assets/js/114.decba05a.js"><link rel="prefetch" href="/assets/js/115.2db94b7b.js"><link rel="prefetch" href="/assets/js/116.90a64bf4.js"><link rel="prefetch" href="/assets/js/117.23d35494.js"><link rel="prefetch" href="/assets/js/118.47c182d8.js"><link rel="prefetch" href="/assets/js/119.5ff673f9.js"><link rel="prefetch" href="/assets/js/12.0ed640a1.js"><link rel="prefetch" href="/assets/js/120.92e75de2.js"><link rel="prefetch" href="/assets/js/121.7e97bf0f.js"><link rel="prefetch" href="/assets/js/122.c2faa5b2.js"><link rel="prefetch" href="/assets/js/123.8ae9105b.js"><link rel="prefetch" href="/assets/js/124.26c930f2.js"><link rel="prefetch" href="/assets/js/125.c343cfda.js"><link rel="prefetch" href="/assets/js/126.a8df235a.js"><link rel="prefetch" href="/assets/js/127.4a348d82.js"><link rel="prefetch" href="/assets/js/128.0063f5b6.js"><link rel="prefetch" href="/assets/js/129.0684ae23.js"><link rel="prefetch" href="/assets/js/13.9b870990.js"><link rel="prefetch" href="/assets/js/130.c932cc50.js"><link rel="prefetch" href="/assets/js/131.4e2fe734.js"><link rel="prefetch" href="/assets/js/132.28afb4d9.js"><link rel="prefetch" href="/assets/js/133.e1bc19d7.js"><link rel="prefetch" href="/assets/js/134.5e7a52d1.js"><link rel="prefetch" href="/assets/js/135.dac10c72.js"><link rel="prefetch" href="/assets/js/136.73db4c6b.js"><link rel="prefetch" href="/assets/js/137.24e7a5c9.js"><link rel="prefetch" href="/assets/js/138.7cfb25cb.js"><link rel="prefetch" href="/assets/js/139.42d2a8fa.js"><link rel="prefetch" href="/assets/js/14.4794068b.js"><link rel="prefetch" href="/assets/js/140.bdb33e9a.js"><link rel="prefetch" href="/assets/js/141.47e372fd.js"><link rel="prefetch" href="/assets/js/142.b2ee056c.js"><link rel="prefetch" href="/assets/js/143.f02e8317.js"><link rel="prefetch" href="/assets/js/144.6b12b788.js"><link rel="prefetch" href="/assets/js/145.fcfb5079.js"><link rel="prefetch" href="/assets/js/146.e0c47b52.js"><link rel="prefetch" href="/assets/js/147.7665455c.js"><link rel="prefetch" href="/assets/js/148.20fd9952.js"><link rel="prefetch" href="/assets/js/149.dfd05b01.js"><link rel="prefetch" href="/assets/js/15.e392c70f.js"><link rel="prefetch" href="/assets/js/150.9f8c270f.js"><link rel="prefetch" href="/assets/js/151.9afeef43.js"><link rel="prefetch" href="/assets/js/152.6933482a.js"><link rel="prefetch" href="/assets/js/153.e65e43a4.js"><link rel="prefetch" href="/assets/js/154.28391de9.js"><link rel="prefetch" href="/assets/js/155.d95701eb.js"><link rel="prefetch" href="/assets/js/156.749f7732.js"><link rel="prefetch" href="/assets/js/16.019de8ce.js"><link rel="prefetch" href="/assets/js/17.c628a80f.js"><link rel="prefetch" href="/assets/js/18.4ab7403e.js"><link rel="prefetch" href="/assets/js/19.ae2840ee.js"><link rel="prefetch" href="/assets/js/20.09f9c6ec.js"><link rel="prefetch" href="/assets/js/21.4b8a4546.js"><link rel="prefetch" href="/assets/js/22.9ab8af85.js"><link rel="prefetch" href="/assets/js/23.4e51bd27.js"><link rel="prefetch" href="/assets/js/24.297c5891.js"><link rel="prefetch" href="/assets/js/25.96b34fa3.js"><link rel="prefetch" href="/assets/js/26.75dd9db7.js"><link rel="prefetch" href="/assets/js/27.32f2ebbc.js"><link rel="prefetch" href="/assets/js/28.87e0f3e3.js"><link rel="prefetch" href="/assets/js/29.a8869a85.js"><link rel="prefetch" href="/assets/js/3.95140222.js"><link rel="prefetch" href="/assets/js/30.9fa7fb8c.js"><link rel="prefetch" href="/assets/js/31.7d7e60c3.js"><link rel="prefetch" href="/assets/js/32.e738efc8.js"><link rel="prefetch" href="/assets/js/33.747e685b.js"><link rel="prefetch" href="/assets/js/34.0a3b552f.js"><link rel="prefetch" href="/assets/js/35.75e34b3f.js"><link rel="prefetch" href="/assets/js/36.32a7b934.js"><link rel="prefetch" href="/assets/js/37.7755aba0.js"><link rel="prefetch" href="/assets/js/38.236a265f.js"><link rel="prefetch" href="/assets/js/39.64d08d4e.js"><link rel="prefetch" href="/assets/js/40.36314885.js"><link rel="prefetch" href="/assets/js/41.4cce3a1c.js"><link rel="prefetch" href="/assets/js/42.b53de554.js"><link rel="prefetch" href="/assets/js/43.7708df51.js"><link rel="prefetch" href="/assets/js/44.a5a36f06.js"><link rel="prefetch" href="/assets/js/45.1fdf9d60.js"><link rel="prefetch" href="/assets/js/46.39c7ca11.js"><link rel="prefetch" href="/assets/js/47.ea4a708d.js"><link rel="prefetch" href="/assets/js/48.62ec3abf.js"><link rel="prefetch" href="/assets/js/49.8a57f5f7.js"><link rel="prefetch" href="/assets/js/5.44d1fb4e.js"><link rel="prefetch" href="/assets/js/50.358979c6.js"><link rel="prefetch" href="/assets/js/51.369a4732.js"><link rel="prefetch" href="/assets/js/52.703082e6.js"><link rel="prefetch" href="/assets/js/53.27264aee.js"><link rel="prefetch" href="/assets/js/54.733a10fa.js"><link rel="prefetch" href="/assets/js/55.486cd4d0.js"><link rel="prefetch" href="/assets/js/56.e2bdcab7.js"><link rel="prefetch" href="/assets/js/57.015de866.js"><link rel="prefetch" href="/assets/js/58.89ab3d68.js"><link rel="prefetch" href="/assets/js/59.d2e7960e.js"><link rel="prefetch" href="/assets/js/6.67cc1f3f.js"><link rel="prefetch" href="/assets/js/60.02d2da05.js"><link rel="prefetch" href="/assets/js/61.cff833b9.js"><link rel="prefetch" href="/assets/js/62.15d2429b.js"><link rel="prefetch" href="/assets/js/63.96e9cfe8.js"><link rel="prefetch" href="/assets/js/64.d19ee82c.js"><link rel="prefetch" href="/assets/js/65.979cac10.js"><link rel="prefetch" href="/assets/js/66.7542b4a5.js"><link rel="prefetch" href="/assets/js/67.b9580df6.js"><link rel="prefetch" href="/assets/js/68.29872d2c.js"><link rel="prefetch" href="/assets/js/69.83c2b112.js"><link rel="prefetch" href="/assets/js/7.30873a64.js"><link rel="prefetch" href="/assets/js/70.fd4ed156.js"><link rel="prefetch" href="/assets/js/71.36af5483.js"><link rel="prefetch" href="/assets/js/72.6d686b92.js"><link rel="prefetch" href="/assets/js/73.b3b74d9d.js"><link rel="prefetch" href="/assets/js/74.3f129e62.js"><link rel="prefetch" href="/assets/js/75.4e93e65b.js"><link rel="prefetch" href="/assets/js/76.e137a1da.js"><link rel="prefetch" href="/assets/js/77.614596eb.js"><link rel="prefetch" href="/assets/js/78.5f7f1438.js"><link rel="prefetch" href="/assets/js/79.a14cbf13.js"><link rel="prefetch" href="/assets/js/8.988484b0.js"><link rel="prefetch" href="/assets/js/80.a7a91bf8.js"><link rel="prefetch" href="/assets/js/81.2091dd76.js"><link rel="prefetch" href="/assets/js/82.329755fd.js"><link rel="prefetch" href="/assets/js/83.fac501f1.js"><link rel="prefetch" href="/assets/js/84.b6ad5c3e.js"><link rel="prefetch" href="/assets/js/85.f89c7736.js"><link rel="prefetch" href="/assets/js/86.afed2f14.js"><link rel="prefetch" href="/assets/js/87.4f9893b2.js"><link rel="prefetch" href="/assets/js/88.97f8ae06.js"><link rel="prefetch" href="/assets/js/89.7a183e65.js"><link rel="prefetch" href="/assets/js/90.1770f69b.js"><link rel="prefetch" href="/assets/js/91.771dc0cf.js"><link rel="prefetch" href="/assets/js/92.bbdc5f4f.js"><link rel="prefetch" href="/assets/js/93.fa43b929.js"><link rel="prefetch" href="/assets/js/94.eab46fc5.js"><link rel="prefetch" href="/assets/js/95.b66955fe.js"><link rel="prefetch" href="/assets/js/96.8d5a62c9.js"><link rel="prefetch" href="/assets/js/97.b61dadc3.js"><link rel="prefetch" href="/assets/js/98.6738592b.js"><link rel="prefetch" href="/assets/js/99.e1197f64.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8c98fca4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/about/" class="nav-link">About</a></div><div class="nav-item"><a href="/author/" class="nav-link">Author</a></div><div class="nav-item"><a href="/articles/" class="nav-link">Blog</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/about/" class="nav-link">About</a></div><div class="nav-item"><a href="/author/" class="nav-link">Author</a></div><div class="nav-item"><a href="/articles/" class="nav-link">Blog</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Learn how YOU can use both C# and JavaScript in your .NET Core Blazor app with the JavaScript interop</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/dotnet-blazor-interop.html#references" class="sidebar-link">References</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/dotnet-blazor-interop.html#why" class="sidebar-link">WHY</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/dotnet-blazor-interop.html#what" class="sidebar-link">WHAT</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/dotnet-blazor-interop.html#different-ways-to-use-the-ijsruntime" class="sidebar-link">Different ways to use the IJSRuntime</a></li></ul></li><li><a href="/pages/dotnet-blazor-interop.html#demo" class="sidebar-link">DEMO</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/dotnet-blazor-interop.html#scaffold-a-project" class="sidebar-link">Scaffold a project</a></li><li class="sidebar-sub-header"><a href="/pages/dotnet-blazor-interop.html#invoke-javascript-functions" class="sidebar-link">Invoke JavaScript functions</a></li><li class="sidebar-sub-header"><a href="/pages/dotnet-blazor-interop.html#an-example-with-more-complex-parameters" class="sidebar-link">An example with more complex parameters</a></li></ul></li><li><a href="/pages/dotnet-blazor-interop.html#full-code-of-our-blazor-component" class="sidebar-link">Full code of our Blazor component</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/dotnet-blazor-interop.html#summary" class="sidebar-link">Summary</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="learn-how-you-can-use-both-c-and-javascript-in-your-net-core-blazor-app-with-the-javascript-interop"><a href="#learn-how-you-can-use-both-c-and-javascript-in-your-net-core-blazor-app-with-the-javascript-interop" aria-hidden="true" class="header-anchor">#</a> Learn how YOU can use both C# and JavaScript in your .NET Core Blazor app with the JavaScript interop</h1> <p><img src="https://thepracticaldev.s3.amazonaws.com/i/knm2cc39ujgar21wzmsa.jpg" alt=""></p> <p>Follow me on <a href="https://twitter.com/chris_noring" target="_blank" rel="noopener noreferrer">Twitter<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, happy to take your suggestions on topics or improvements /Chris</p> <blockquote><p>Blazor is the new framework from Microsoft that will make it possible to build applications for the Web using nothing but C#. It's easy at first look to think - Great I don't need to learn JavaScript. To be honest, I think this is the wrong way to look at it. Having a huge ecosystem of libraries written in JavaScript is an opportunity. At the end of the day, it's about solving the client's problem and doing so in a fast and efficient way. With Blazor we know have the opportunity to use the best of two worlds. The .NET Apis and the JavaScript ecosystem.</p></blockquote> <p>TLDR; This article will show how to use something called the JavaScript interop which allows us to call JavaScript code from Blazor. Learn to be the developer that leverages two powerful ecosystems .NET APIs and the JavaScript ecosystem.</p> <p>In this article, we assume that you as a reader knows what Blazor is. It's recommended that if you are completely new to Blazor you first have a read through this introductory article:
{% link https://dev.to/dotnet/blazor-the-future-of-net-web-apps-a-first-look-m8 %}</p> <h2 id="references"><a href="#references" aria-hidden="true" class="header-anchor">#</a> References</h2> <ul><li><p><a href="https://docs.microsoft.com/aspnet/core/blazor/javascript-interop?view=aspnetcore-3.0?wt.mc_id=personal-blog-chnoring" target="_blank" rel="noopener noreferrer">JavaScript and Blazor doc<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
This link describes everything this article has gone through but also covers how you would from JavaScript call your Blazor component and additionally it talks about lifecycles</p></li> <li><p><a href="https://docs.microsoft.com/aspnet/core/blazor/?view=aspnetcore-3.0?wt.mc_id=personal-blog-chnoring" target="_blank" rel="noopener noreferrer">Introduction to Blazor doc<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
This is a good introduction page to Blazor</p></li> <li><p><a href="https://docs.microsoft.com/aspnet/core/mvc/views/razor?view=aspnetcore-3.0?wt.mc_id=personal-blog-chnoring" target="_blank" rel="noopener noreferrer">Introduction to Razor templating with Blazor<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
New to Razor templating and especially what tags exist in Blazor? Then this page is for you</p></li> <li><p><a href="https://docs.microsoft.com/aspnet/core/host-and-deploy/?view=aspnetcore-3.0?wt.mc_id=personal-blog-chnoring" target="_blank" rel="noopener noreferrer">Part one on Blazor, start here if you don't know anything about Blazor<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
Want to know how to deploy your Blazor app? This goes through both a server hosted Blazor app as well as a WebAssembly version</p></li></ul> <h2 id="why"><a href="#why" aria-hidden="true" class="header-anchor">#</a> WHY</h2> <p>As we mentioned at the beginning of this article. In my opinion, it's not good to limit ourselves to only use the .NET APIs. At the end of the day, it's about getting the job done. For that reason learning how to execute JavaScript from within Blazor is a skill worth having, especially if it means that we can leverage other existing libraries from for example NPM. Another reason for wanting to execute JavaScript from within Blazor might be that we need to use a specific Browser capability.</p> <h2 id="what"><a href="#what" aria-hidden="true" class="header-anchor">#</a> WHAT</h2> <p>This article covers something called the JavaScript interop. At our disposal, we have an abstraction called <code>IJSRuntime</code> and on it, we execute the method <code>InvokeAsync&lt;T&gt;()</code>. The method expects the name of the function you want to execute and a list of serialized JSON parameters. A typical call looks something like this:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token keyword">await</span> JSRuntime<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">InvokeAsync</span><span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token string">&quot;methodName&quot;</span><span class="token punctuation">,</span> input<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>What happens in the above code is that the method <code>methodName()</code> is being invoked and the parameter <code>input</code> is being turned into a string.</p> <h3 id="different-ways-to-use-the-ijsruntime"><a href="#different-ways-to-use-the-ijsruntime" aria-hidden="true" class="header-anchor">#</a> Different ways to use the <code>IJSRuntime</code></h3> <p>You can call the JavaScript interop from different places. Either:</p> <ul><li><strong>From the component</strong>, If you want to use it from within a component you just need an inject statement at the top of the component like so:</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>@inject IJSRuntime JSRuntime
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><strong>From the a C# class</strong>, if you want to use the interop from within a class you need to inject it into the class's constructor like so:</li></ul> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">class</span> <span class="token class-name">Something</span> 
<span class="token punctuation">{</span>
  <span class="token function">Something</span><span class="token punctuation">(</span><span class="token class-name">IJSRuntime</span> jsRuntime<span class="token punctuation">)</span> 
  <span class="token punctuation">{</span>

  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="demo"><a href="#demo" aria-hidden="true" class="header-anchor">#</a> DEMO</h2> <p>Ok, so what are we building? Well, let's do the following:</p> <ul><li><strong>Scaffold</strong> a project, we need to create a Blazor project. We can do that from the command line</li> <li><strong>Invoke</strong> javascript functions, we will create a Blazor component where we will add some code to showcase different ways of calling the JavaScript code using the interop functionality.</li> <li><strong>Download</strong> and use a library from NPM, we will leverage the NPM ecosystem by downloading an NPM library and call that from our Blazor Component</li></ul> <h3 id="scaffold-a-project"><a href="#scaffold-a-project" aria-hidden="true" class="header-anchor">#</a> Scaffold a project</h3> <p>There are two things that needs to be installed for us to be able to create a Blazor project:</p> <ol><li>Blazor templates, we can easily install these from the command line with the command</li> <li>.NET Core, latest and greatest</li></ol> <p>You need to download .Net Core 3.0. Check out this link to find the correct distribution for your OS</p> <blockquote><p>https://dotnet.microsoft.com/download/dotnet-core/3.0</p></blockquote> <p>You want to be picking the latest and greatest on the above page cause it will give you the latest features of Blazor and usually Blazor templates rely on the latest possible version of .NET Core.</p> <p>Additionally, you need templates so you can scaffold a Blazor app. Pop open a terminal and type</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>dotnet new -i Microsoft.AspNetCore.Blazor.Templates::3.1.0-preview2.19528.8
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="invoke-javascript-functions"><a href="#invoke-javascript-functions" aria-hidden="true" class="header-anchor">#</a> Invoke JavaScript functions</h3> <p>So the first question is, of course, how can we be calling JavaScript functions and with what? We know the first part of the answer. We should be using <code>IJSRuntime</code> and the method <code>InvokeAsync()</code>. Next, we need to know where to place our JavaScript?</p> <p>The answer is inside of a script file and we need to refer to this script file by placing a <code>script</code> tag in the directory <code>wwwwroot</code> and the file <code>index.html</code>.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>-| wwwroot/
---| index.html
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Let's say then that we create a file <code>library.js</code> in <code>wwwroot</code> so we know have:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>-| wwwroot/
---| index.html
---| library.js
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Then we need to open up <code>index.html</code> and add our script tag like so:</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- index.html --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>library.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>What about the content of <code>library.js</code> then? Well here it is:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// library.js</span>

<span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">lhs<span class="token punctuation">,</span> rhs</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> lhs<span class="token operator">+</span>rhs<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>At this point, let's go to our <code>Pages</code> directory and create a new component <code>Jsdemo.razor</code>, like so:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>-| Pages
---| Jsdemo.razor
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>give it the following content:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>@page <span class="token string">&quot;/jsdemo&quot;</span>
@inject <span class="token class-name">IJSRuntime</span> JSRuntime

<span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span><span class="token class-name">JS</span> Demo<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
Result <span class="token punctuation">:</span> @result

<span class="token operator">&lt;</span>button @onclick<span class="token operator">=</span><span class="token string">&quot;Add&quot;</span><span class="token operator">&gt;</span>Add<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>

@code <span class="token punctuation">{</span>
  <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token keyword">void</span> <span class="token function">Add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
  <span class="token punctuation">{</span>
    result <span class="token operator">=</span> <span class="token keyword">await</span> JSRuntime<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">InvokeAsync</span><span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token string">&quot;add&quot;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>There are many things that go on here:</p> <ol><li>We call <code>JSRuntime.InvokeAsync&lt;int&gt;(&quot;add&quot;,1,2)</code>, with the first arg being <code>add</code>, the name of the function. Followed by <code>1,2</code>, which are the arguments to the function.</li> <li>Then we notice <code>&lt;int&gt;</code>, this sets up the return type of the function</li> <li>Looking at the full function:</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token keyword">void</span> <span class="token function">Add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token punctuation">{</span>
  result <span class="token operator">=</span> <span class="token keyword">await</span> JSRuntime<span class="token punctuation">.</span>InvokeAsync<span class="token operator">&lt;</span>int<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">&quot;add&quot;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>we see that we call <code>await</code> to wait for the response, which also means we need to mark our <code>Add()</code> function with <code>async</code> to make the compiler happy.</p> <h3 id="an-example-with-more-complex-parameters"><a href="#an-example-with-more-complex-parameters" aria-hidden="true" class="header-anchor">#</a> An example with more complex parameters</h3> <p>Ok, we want to ensure that it still works by invoking functions with parameters that are arrays and even objects.</p> <p>Let's add two functions to our <code>library.js</code> and update it's content to the following:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// library.js</span>

<span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">lhs<span class="token punctuation">,</span> rhs</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> lhs<span class="token operator">+</span>rhs<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">commonElements</span><span class="token punctuation">(</span><span class="token parameter">arr1<span class="token punctuation">,</span> arr2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> arr1<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">a</span> <span class="token operator">=&gt;</span> arr2<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">b</span> <span class="token operator">=&gt;</span> b <span class="token operator">===</span> a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>So how to call it? Well, just like we did before using <code>JSRuntime.InvokeAsync&lt;int&gt;(&quot;name-of-method&quot;,arg...)</code>.</p> <p>Let's go update our Blazor component <code>Jsdemo.razor</code> to this:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>@page <span class="token string">&quot;/jsdemo&quot;</span>
@inject <span class="token class-name">IJSRuntime</span> JSRuntime

<span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span><span class="token class-name">JS</span> Demo<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
Result <span class="token punctuation">:</span> @result

<span class="token class-name">Common</span> elements result<span class="token punctuation">:</span>
@stringResult

<span class="token operator">&lt;</span>button @onclick<span class="token operator">=</span><span class="token string">&quot;Add&quot;</span><span class="token operator">&gt;</span>Add<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button @onclick<span class="token operator">=</span><span class="token string">&quot;Common&quot;</span><span class="token operator">&gt;</span><span class="token class-name">Common</span> elements<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>

@code <span class="token punctuation">{</span>
  <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">string</span> stringResult <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token function">Common</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
  <span class="token punctuation">{</span>
    stringResult <span class="token operator">=</span> <span class="token keyword">await</span> JSRuntime<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">InvokeAsync</span><span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token string">&quot;commonElements&quot;</span><span class="token punctuation">,</span>arr1<span class="token punctuation">,</span>arr2<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token keyword">void</span> <span class="token function">Add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
  <span class="token punctuation">{</span>
    result <span class="token operator">=</span> <span class="token keyword">await</span> JSRuntime<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">InvokeAsync</span><span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token string">&quot;add&quot;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>Note above how we add some markup for this new result:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name">Common</span> elements result<span class="token punctuation">:</span>
@stringResult

<span class="token operator">&lt;</span>button @onclick<span class="token operator">=</span><span class="token string">&quot;Common&quot;</span><span class="token operator">&gt;</span><span class="token class-name">Common</span> elements<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>We also need to create some new input parameters, two arrays:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Lastly we add the method <code>Common()</code>, like so:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token function">Common</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
  <span class="token punctuation">{</span>
    stringResult <span class="token operator">=</span> <span class="token keyword">await</span> JSRuntime<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">InvokeAsync</span><span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token string">&quot;commonElements&quot;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>As you can see there is really no difference between having primitives our arrays as inputs. The main reason is that everything gets serialized to JSON on the .NET side and is de-serialized right back when the JavaScript function is being invoked.</p> <p>### Calling NPM code</p> <p>Ok, so let's talk about using JavaScript libraries. After all one of the strengths of Blazor lies in the ability to use both ecosystems, both .NET and NPM. So how do we do that?</p> <p>Well, we need to consider the following:</p> <ol><li>Large libraries, some libraries are really big out there, like <code>Lodash</code>. Fortunately, there is a way to import only the functions we are going to need, the rest can be omitted through a process called <em>tree shaking</em></li> <li>If we are using only a part of a library like the above scenario we need a way to extract the code we need, so we need a tool like <code>browserify</code> or <code>webpack</code> to create a bundle of a subset of code</li></ol> <p>Ok then, we understand what we need to consider. Now let's do just that, let's extract a function from the library <code>lodash</code>. Let's list the steps we need to take:</p> <ul><li><strong>Create</strong> a directory where our bundle and downloaded libraries will live</li> <li><strong>Download</strong> the NPM library</li> <li><strong>Set up</strong> up a tool like <code>browserify</code> to make it possible to create bundle with an <code>NPM command</code></li> <li><strong>Create</strong> the bundle with <code>browserify</code> and include the resulting bundle as a script tag</li> <li><strong>Try out</strong> code from our bundle</li></ul> <p><strong>Create</strong></p> <p>Let's create a directory under <code>wwwroot</code> called <code>npm-libs</code>, you can call it what you want.</p> <p>It should now looks like this:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>-| wwwroot
---| npm-libs/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>We will treat this is as a Node.js project and with Node.js projects you want to initialize it using <code>npm init</code>, like so:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm init -y 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>This will give us a nice Node.js project with some good defaults and most of all a <code>package.json</code> file.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>-| wwwroot
---| npm-libs/
------| package.json 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>We will use this <code>package.json</code> file as a manifest file that tells us about the libraries we need and commands we can use to build our bundle.</p> <p><strong>Download</strong></p> <p>Inside of our <code>npm-libs</code> we now run the <code>npm install</code> command to give us the library we want, in this case, <code>lodash</code>:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm install lodash
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>This means that our file structure now contains a <code>node_modules</code> directory, with our downloaded library, like so:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>-| wwwroot
---| npm-libs/
------| package.json 
------| node_modules/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>Set up</strong></p> <p>Next, we need to install our bundling tool <code>browserify</code>:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm install -g browserify
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>We are now ready to define a command to run <code>browserify</code>,it should look like so:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>browserify -d index.js &gt; bundle.js
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>The above will take the file <code>index.js</code>, walk the tree over all its dependencies and produce a bundle, that we call <code>bundle.js</code>. Note also how we include <code>-d</code>, this is for source maps. Source maps mean our modules will be remembered for how they looked prior to <em>bundling</em>. We should lose the <code>-d</code> when in production because the source maps makes the bundle bigger.</p> <p>Let's put this command in the <code>scripts</code> section of <code>package.json</code> so we now have:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;browserify -d index.js &gt; bundle.js&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Ok then, the next step is to create our <code>index.js</code> like so:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>-| wwwroot
---| npm-libs/
------| index.js
------| package.json 
------| node_modules/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>and give it the following content:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// index.js</span>

<span class="token keyword">var</span> intersect <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'lodash/fp/intersection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

window<span class="token punctuation">.</span><span class="token function-variable function">intersect</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">arg1<span class="token punctuation">,</span> arg2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">intersect</span><span class="token punctuation">(</span>arg1<span class="token punctuation">,</span> arg2<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> result<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>What we are doing above is asking for a subset of <code>lodash</code> by only loading the function <code>intersection</code>:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> intersect <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'lodash/fp/intersection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>this means that when this <em>tree-shakes</em>, it will only include the <code>intersection</code> code and our bundle will be at a minimum.</p> <p>Next, we assign the <code>intersection</code> function to the <code>window</code> property and expose it so our C# code can call it.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function-variable function">intersect</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">arg1<span class="token punctuation">,</span> arg2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">intersect</span><span class="token punctuation">(</span>arg1<span class="token punctuation">,</span> arg2<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> result<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>At this point we run:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm run build
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>This should produce a <code>bundle.js</code>. We should also add a reference to our <code>bundle.js</code> in our <code>index.html</code> file, like so:</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>bundle.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>Try it out</strong></p> <p>Lastly, we want to call this JavaScript code from our Blazor component. So we add the following code to our <code>@code</code> section, like so:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code> <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token keyword">void</span> <span class="token function">Intersect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
  <span class="token punctuation">{</span>
     intersectResult <span class="token operator">=</span> <span class="token keyword">await</span> JSRuntime<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">InvokeAsync</span><span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token string">&quot;intersect&quot;</span><span class="token punctuation">,</span>arr1<span class="token punctuation">,</span> arr2<span class="token punctuation">)</span><span class="token punctuation">;</span>
     Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>intersectResult<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>and the following to our markup:</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Intersect<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Intersect<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

Intersect:
@intersectResult
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="full-code-of-our-blazor-component"><a href="#full-code-of-our-blazor-component" aria-hidden="true" class="header-anchor">#</a> Full code of our Blazor component</h2> <p>Let's show the full code in case you got lost somewhere:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>@page <span class="token string">&quot;/jsdemo&quot;</span>
@inject <span class="token class-name">IJSRuntime</span> JSRuntime

<span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span><span class="token class-name">JS</span> Demo<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
Result <span class="token punctuation">:</span> @result

<span class="token operator">&lt;</span>button @onclick<span class="token operator">=</span><span class="token string">&quot;Click&quot;</span><span class="token operator">&gt;</span>Press<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button @onclick<span class="token operator">=</span><span class="token string">&quot;Add&quot;</span><span class="token operator">&gt;</span>Add<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button @onclick<span class="token operator">=</span><span class="token string">&quot;Intersect&quot;</span><span class="token operator">&gt;</span>Intersect<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>

Intersect<span class="token punctuation">:</span>
@intersectResult

@code <span class="token punctuation">{</span>
  <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">string</span> intersectResult <span class="token operator">=</span> <span class="token string">&quot;replace me&quot;</span><span class="token punctuation">;</span>
  
  <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token keyword">void</span> <span class="token function">Intersect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
  <span class="token punctuation">{</span>
     intersectResult <span class="token operator">=</span> <span class="token keyword">await</span> JSRuntime<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">InvokeAsync</span><span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token string">&quot;intersect&quot;</span><span class="token punctuation">,</span>arr1<span class="token punctuation">,</span> arr2<span class="token punctuation">)</span><span class="token punctuation">;</span>
     Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>intersectResult<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token keyword">void</span> <span class="token function">Add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
  <span class="token punctuation">{</span>
    result <span class="token operator">=</span> <span class="token keyword">await</span> JSRuntime<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">InvokeAsync</span><span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token string">&quot;add&quot;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">void</span> <span class="token function">Click</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
  <span class="token punctuation">{</span>
    JSRuntime<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">InvokeAsync</span><span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token string">&quot;alert&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><h2 id="summary"><a href="#summary" aria-hidden="true" class="header-anchor">#</a> Summary</h2> <p>And that's all, that's what we wanted to achieve. We tried out different ways of calling our code, with primitive parameters, without it. We even showed how we could download a JavaScript library from NPM and make that part of our project.</p> <p>I hope this was educational and that you are helped for the following scenarios:</p> <ul><li><strong>Occasional usage</strong>, Calling JavaScript code occasionally</li> <li><strong>Leveraging existing libraries</strong>, you might have existing libraries you've written and don't want to reinvent the wheel or maybe there's a library on NPM that just does what you want it to.</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.bc4509b6.js" defer></script><script src="/assets/js/9.20ba5650.js" defer></script><script src="/assets/js/4.b33b06f6.js" defer></script><script src="/assets/js/112.c1f25142.js" defer></script>
  </body>
</html>
