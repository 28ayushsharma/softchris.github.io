<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>How YOU can Dockerize a .Net Core app</title>
    <meta name="description" content="[object Object]">
    <head link="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-abap.js"></head>
    
    <link rel="preload" href="/assets/css/0.styles.702bdf73.css" as="style"><link rel="preload" href="/assets/js/app.4c64a047.js" as="script"><link rel="preload" href="/assets/js/9.4bb2b8d6.js" as="script"><link rel="preload" href="/assets/js/4.4e8b8d29.js" as="script"><link rel="preload" href="/assets/js/117.15067f27.js" as="script"><link rel="prefetch" href="/assets/js/1.24c608c1.js"><link rel="prefetch" href="/assets/js/10.3c14d46c.js"><link rel="prefetch" href="/assets/js/100.4d43d436.js"><link rel="prefetch" href="/assets/js/101.928f5dd0.js"><link rel="prefetch" href="/assets/js/102.1291f4db.js"><link rel="prefetch" href="/assets/js/103.cba36448.js"><link rel="prefetch" href="/assets/js/104.6aac54a0.js"><link rel="prefetch" href="/assets/js/105.515585f2.js"><link rel="prefetch" href="/assets/js/106.983710b4.js"><link rel="prefetch" href="/assets/js/107.1d6966ad.js"><link rel="prefetch" href="/assets/js/108.c23e0f28.js"><link rel="prefetch" href="/assets/js/109.7e7a671a.js"><link rel="prefetch" href="/assets/js/11.58d604c0.js"><link rel="prefetch" href="/assets/js/110.81e9f7f0.js"><link rel="prefetch" href="/assets/js/111.4f04c3ae.js"><link rel="prefetch" href="/assets/js/112.e8f82749.js"><link rel="prefetch" href="/assets/js/113.e282e4ab.js"><link rel="prefetch" href="/assets/js/114.9deea547.js"><link rel="prefetch" href="/assets/js/115.2699b070.js"><link rel="prefetch" href="/assets/js/116.a7bd26b0.js"><link rel="prefetch" href="/assets/js/118.d56ef672.js"><link rel="prefetch" href="/assets/js/119.26491ecf.js"><link rel="prefetch" href="/assets/js/12.07aa0299.js"><link rel="prefetch" href="/assets/js/120.5ef5af10.js"><link rel="prefetch" href="/assets/js/121.9614405f.js"><link rel="prefetch" href="/assets/js/122.a6ee2ab7.js"><link rel="prefetch" href="/assets/js/123.258ec015.js"><link rel="prefetch" href="/assets/js/124.1a860943.js"><link rel="prefetch" href="/assets/js/125.f715af09.js"><link rel="prefetch" href="/assets/js/126.a55d6a7c.js"><link rel="prefetch" href="/assets/js/127.f477ddee.js"><link rel="prefetch" href="/assets/js/128.d56b3047.js"><link rel="prefetch" href="/assets/js/129.0c62c5b9.js"><link rel="prefetch" href="/assets/js/13.804669a3.js"><link rel="prefetch" href="/assets/js/130.21dd9e59.js"><link rel="prefetch" href="/assets/js/131.28c43f99.js"><link rel="prefetch" href="/assets/js/132.41823ed8.js"><link rel="prefetch" href="/assets/js/133.300eadcf.js"><link rel="prefetch" href="/assets/js/134.7371b34c.js"><link rel="prefetch" href="/assets/js/135.a42e9558.js"><link rel="prefetch" href="/assets/js/136.49feec95.js"><link rel="prefetch" href="/assets/js/137.394b6cbe.js"><link rel="prefetch" href="/assets/js/138.eeb38085.js"><link rel="prefetch" href="/assets/js/139.9459d54b.js"><link rel="prefetch" href="/assets/js/14.29c9effd.js"><link rel="prefetch" href="/assets/js/140.31cde3c8.js"><link rel="prefetch" href="/assets/js/141.1eb7f6e6.js"><link rel="prefetch" href="/assets/js/142.ab62220d.js"><link rel="prefetch" href="/assets/js/143.4b8d0353.js"><link rel="prefetch" href="/assets/js/144.300ee7ad.js"><link rel="prefetch" href="/assets/js/145.fada2630.js"><link rel="prefetch" href="/assets/js/146.f6446281.js"><link rel="prefetch" href="/assets/js/147.c2ae1a27.js"><link rel="prefetch" href="/assets/js/148.c0f0ad31.js"><link rel="prefetch" href="/assets/js/149.d5264867.js"><link rel="prefetch" href="/assets/js/15.94228c4c.js"><link rel="prefetch" href="/assets/js/150.5c74cddf.js"><link rel="prefetch" href="/assets/js/151.83781f0e.js"><link rel="prefetch" href="/assets/js/152.d2fba1ae.js"><link rel="prefetch" href="/assets/js/153.981e8922.js"><link rel="prefetch" href="/assets/js/154.6b6c18f4.js"><link rel="prefetch" href="/assets/js/155.b0badf10.js"><link rel="prefetch" href="/assets/js/156.4e76b85d.js"><link rel="prefetch" href="/assets/js/157.466eea0a.js"><link rel="prefetch" href="/assets/js/16.3fc83a1a.js"><link rel="prefetch" href="/assets/js/17.f01c72ab.js"><link rel="prefetch" href="/assets/js/18.0fbc545b.js"><link rel="prefetch" href="/assets/js/19.4162c2d8.js"><link rel="prefetch" href="/assets/js/20.05181376.js"><link rel="prefetch" href="/assets/js/21.6794696e.js"><link rel="prefetch" href="/assets/js/22.fe2d6c37.js"><link rel="prefetch" href="/assets/js/23.eb19d640.js"><link rel="prefetch" href="/assets/js/24.67aa5742.js"><link rel="prefetch" href="/assets/js/25.cd15d3b1.js"><link rel="prefetch" href="/assets/js/26.f604e2cc.js"><link rel="prefetch" href="/assets/js/27.1314f146.js"><link rel="prefetch" href="/assets/js/28.ffddf92c.js"><link rel="prefetch" href="/assets/js/29.52b086ff.js"><link rel="prefetch" href="/assets/js/3.95140222.js"><link rel="prefetch" href="/assets/js/30.688988c7.js"><link rel="prefetch" href="/assets/js/31.dc010477.js"><link rel="prefetch" href="/assets/js/32.0303ebae.js"><link rel="prefetch" href="/assets/js/33.4beb1729.js"><link rel="prefetch" href="/assets/js/34.cd9c78e2.js"><link rel="prefetch" href="/assets/js/35.cd6fc8ed.js"><link rel="prefetch" href="/assets/js/36.fbddd3e7.js"><link rel="prefetch" href="/assets/js/37.b51aaba8.js"><link rel="prefetch" href="/assets/js/38.bedf25d3.js"><link rel="prefetch" href="/assets/js/39.151f6522.js"><link rel="prefetch" href="/assets/js/40.2b130219.js"><link rel="prefetch" href="/assets/js/41.6c9c429e.js"><link rel="prefetch" href="/assets/js/42.ff9c13db.js"><link rel="prefetch" href="/assets/js/43.944e926a.js"><link rel="prefetch" href="/assets/js/44.97a6da64.js"><link rel="prefetch" href="/assets/js/45.caeb7a8d.js"><link rel="prefetch" href="/assets/js/46.c0647ac5.js"><link rel="prefetch" href="/assets/js/47.c7c1d6d6.js"><link rel="prefetch" href="/assets/js/48.ce27ad49.js"><link rel="prefetch" href="/assets/js/49.9eb0eddf.js"><link rel="prefetch" href="/assets/js/5.44d1fb4e.js"><link rel="prefetch" href="/assets/js/50.cb425e0f.js"><link rel="prefetch" href="/assets/js/51.c43b3926.js"><link rel="prefetch" href="/assets/js/52.49492f20.js"><link rel="prefetch" href="/assets/js/53.bc558480.js"><link rel="prefetch" href="/assets/js/54.0224790a.js"><link rel="prefetch" href="/assets/js/55.04bbe8e4.js"><link rel="prefetch" href="/assets/js/56.13cbe842.js"><link rel="prefetch" href="/assets/js/57.95f4c78c.js"><link rel="prefetch" href="/assets/js/58.e05884bd.js"><link rel="prefetch" href="/assets/js/59.0852a3bc.js"><link rel="prefetch" href="/assets/js/6.67cc1f3f.js"><link rel="prefetch" href="/assets/js/60.235d082b.js"><link rel="prefetch" href="/assets/js/61.457b8450.js"><link rel="prefetch" href="/assets/js/62.207a7dc7.js"><link rel="prefetch" href="/assets/js/63.5df8db04.js"><link rel="prefetch" href="/assets/js/64.0a279e8f.js"><link rel="prefetch" href="/assets/js/65.ce0af5ca.js"><link rel="prefetch" href="/assets/js/66.13a32b29.js"><link rel="prefetch" href="/assets/js/67.8aa05a96.js"><link rel="prefetch" href="/assets/js/68.f2b8b54a.js"><link rel="prefetch" href="/assets/js/69.d7e2ee25.js"><link rel="prefetch" href="/assets/js/7.e50b16ef.js"><link rel="prefetch" href="/assets/js/70.4964e7df.js"><link rel="prefetch" href="/assets/js/71.36f7adc7.js"><link rel="prefetch" href="/assets/js/72.8fdbfd29.js"><link rel="prefetch" href="/assets/js/73.9339e29f.js"><link rel="prefetch" href="/assets/js/74.1278934e.js"><link rel="prefetch" href="/assets/js/75.959e77e5.js"><link rel="prefetch" href="/assets/js/76.69afcb2d.js"><link rel="prefetch" href="/assets/js/77.d1006e5a.js"><link rel="prefetch" href="/assets/js/78.26cf6a79.js"><link rel="prefetch" href="/assets/js/79.ff46ea75.js"><link rel="prefetch" href="/assets/js/8.988484b0.js"><link rel="prefetch" href="/assets/js/80.a9c71dc8.js"><link rel="prefetch" href="/assets/js/81.cd32c4e1.js"><link rel="prefetch" href="/assets/js/82.c1f25195.js"><link rel="prefetch" href="/assets/js/83.c3f5ddec.js"><link rel="prefetch" href="/assets/js/84.bd05dad9.js"><link rel="prefetch" href="/assets/js/85.b7fe7f91.js"><link rel="prefetch" href="/assets/js/86.e3ece45a.js"><link rel="prefetch" href="/assets/js/87.feed8e3f.js"><link rel="prefetch" href="/assets/js/88.631724ab.js"><link rel="prefetch" href="/assets/js/89.8d4600f4.js"><link rel="prefetch" href="/assets/js/90.79dfe307.js"><link rel="prefetch" href="/assets/js/91.2d7b1a33.js"><link rel="prefetch" href="/assets/js/92.be05131f.js"><link rel="prefetch" href="/assets/js/93.9815a284.js"><link rel="prefetch" href="/assets/js/94.a32b839b.js"><link rel="prefetch" href="/assets/js/95.24944fdc.js"><link rel="prefetch" href="/assets/js/96.a2057ed3.js"><link rel="prefetch" href="/assets/js/97.0bf41173.js"><link rel="prefetch" href="/assets/js/98.ce30c36c.js"><link rel="prefetch" href="/assets/js/99.1c8ba3b6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.702bdf73.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/about/" class="nav-link">About</a></div><div class="nav-item"><a href="/author/" class="nav-link">Author</a></div><div class="nav-item"><a href="/articles/" class="nav-link">Blog</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/about/" class="nav-link">About</a></div><div class="nav-item"><a href="/author/" class="nav-link">Author</a></div><div class="nav-item"><a href="/articles/" class="nav-link">Blog</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>How YOU can Dockerize a .Net Core app</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/dotnet-dockerize.html#resources" class="sidebar-link">Resources</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/dotnet-dockerize.html#why" class="sidebar-link">Why</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/dotnet-dockerize.html#how-demo" class="sidebar-link">How - demo</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/dotnet-dockerize.html#scaffold-a-web-app" class="sidebar-link">Scaffold a Web App</a></li><li class="sidebar-sub-header"><a href="/pages/dotnet-dockerize.html#create-a-dockerfile" class="sidebar-link">Create a Dockerfile</a></li><li class="sidebar-sub-header"><a href="/pages/dotnet-dockerize.html#create-a-dockerignore-file" class="sidebar-link">Create a .dockerignore file</a></li><li class="sidebar-sub-header"><a href="/pages/dotnet-dockerize.html#build-our-image-start-container" class="sidebar-link">Build our image &amp; start container</a></li></ul></li><li><a href="/pages/dotnet-dockerize.html#clean-up" class="sidebar-link">Clean up</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/dotnet-dockerize.html#summary" class="sidebar-link">Summary</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/dotnet-dockerize.html#acknowledgements" class="sidebar-link">Acknowledgements</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="how-you-can-dockerize-a-net-core-app"><a href="#how-you-can-dockerize-a-net-core-app" aria-hidden="true" class="header-anchor">#</a> How YOU can Dockerize a .Net Core app</h1> <p>Follow me on <a href="https://twitter.com/chris_noring" target="_blank" rel="noopener noreferrer">Twitter<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, happy to take your suggestions on topics or improvements /Chris</p> <p><img src="https://thepracticaldev.s3.amazonaws.com/i/w4o9p2749bys8sc5oa9t.jpg" alt=""></p> <p>This is the first part of a series of posts on using Docker and <em>containerization</em> with .Net Core.</p> <p>In this article, we will</p> <ul><li><strong>Discuss</strong> <em>containerization</em> generally</li> <li><strong>Learn</strong> the steps we need to take like creating artifacts such as <code>Dockerfile</code>, <code>.dockerignore</code> and some basic Docker commands.</li></ul> <h2 id="resources"><a href="#resources" aria-hidden="true" class="header-anchor">#</a> Resources</h2> <ul><li><p><a href="https://azure.microsoft.com/free/?wt.mc_id=personal-blog-chnoring" target="_blank" rel="noopener noreferrer">Sign up for a free Azure account<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
To use containers in the Cloud like a private registry you will need a free Azure account</p></li> <li><p><a href="https://dev.to/softchris/5-part-docker-series-beginner-to-master-3m1b" target="_blank" rel="noopener noreferrer">5 part series on Docker<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, this series aims to provide you with a solid foundation in Docker and covers basic concepts, volumes, networks, docker compose and much more</p></li> <li><p><a href="https://dev.to/azure/improve-your-dockerfile-best-practices-5ll" target="_blank" rel="noopener noreferrer">Dockerfile great practices for beginners<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> This is a guide that will ensure your Docker Image will be as small as possible but also ensure it's performant and you understand why you should use certain commands.</p></li> <li><p><a href="https://dev.to/azure/improve-your-docker-workflow-with-this-vs-code-extension-j60" target="_blank" rel="noopener noreferrer">Improve your Docker workflow with this VS Code extension<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
VS Code can really help you with your Docker workflow with this extension, build run, author, deploy, lot's of great commands</p></li> <li><p><a href="https://dotnet.microsoft.com/learn/aspnet/microservice-tutorial/intro?wt.mc_id=personal-blog-chnoring" target="_blank" rel="noopener noreferrer">Building Microservices with .Net Core<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
This tutorial covers how to build a Microservice in .Net and Dockerize it.</p></li> <li><p><a href="https://docs.microsoft.com/en-us/aspnet/core/getting-started/index?view=aspnetcore-2.2&amp;tabs=macos&amp;wt.mc_id=personal-blog-chnoring" target="_blank" rel="noopener noreferrer">Getting started with ASP .Net Core<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
This will teach you web app development with ASP .Net Core using .Net Core CLI</p></li> <li><p><a href="https://docs.microsoft.com/dotnet/core/docker/build-container?wt.mc_id=personal-blog-chnoring" target="_blank" rel="noopener noreferrer">Containerize a .Net Core App<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
This shows how to Dockerize a Console App</p></li> <li><p><a href="https://docs.docker.com/engine/examples/dotnetcore/?wt.mc_id=personal-blog-chnoring" target="_blank" rel="noopener noreferrer">.Net Core and Docker<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
This is Docker themselves describing how to Dockerize a .Net App.</p></li></ul> <h2 id="why"><a href="#why" aria-hidden="true" class="header-anchor">#</a> Why</h2> <p>In the title, we call what we are about to do <em>dockerizing</em>. It's called <code>dockerizing</code> after Docker. Another name for it is <em>containerization</em>, Docker is such a common vendor for containers the two concepts have become almost synonymous.</p> <p>There are definitely other vendors. You can read more here if interested:</p> <blockquote><p>https://techbeacon.com/enterprise-it/30-essential-container-technology-tools-resources-0</p></blockquote> <p>Docker helps us to place our app in a container. So why do we want to do that in the first place? Well, there are many reasons for wanting to do this. First, let's talk about what a container is. Let's see how Docker defines it:</p> <blockquote><p>A container is a standard unit of software that packages up code and all its dependencies so the application runs quickly and reliably from one computing environment to another.</p></blockquote> <p>Ok, so we gain speed, reliability from one computer environment to another, so works on more than my machine?</p> <blockquote><p>Yes exactly that</p></blockquote> <p><img src="https://thepracticaldev.s3.amazonaws.com/i/6wwfeo6j3xcmcow66fkm.jpg" alt=""></p> <p>What else?</p> <blockquote><p>A Docker container image is a lightweight, standalone, executable package of software that includes everything needed to run an application: code, runtime, system tools, system libraries, and settings</p></blockquote> <p>Ok, so I got everything with me, not only app code but also runtime, system tools, etc. Isn't that a Virtual Image?</p> <blockquote><p>Well no, it's a lightweight version. Containers use the underlying Host OS they run in to make syscalls.</p></blockquote> <p>Oh. I think I got it. I use Docker to create a container, this means I get something small and lightweight that looks the same on everyone's environment. I do this when I want to ship my app or?</p> <blockquote><p>Yes you got it and yes definitely when you want to ship your app but also during development if you want. Today the Cloud is super popular and becomes the default standard for hosting your app. Having your app in a container format means it's easy for us to scale it using, for example, Kubernetes when we want to manage a ton of containers or support a microservice architecture. Storing your containers in the Cloud, in a container registry, is also made possible at most of the large Cloud Vendors.</p></blockquote> <h2 id="how-demo"><a href="#how-demo" aria-hidden="true" class="header-anchor">#</a> How - demo</h2> <p>ok, we brushed the surface on the <em>WHY</em> we should turn our app into a containerized version now let's look at the actual steps we need to take:</p> <ul><li><strong>Scaffold</strong> a .Net Web app,</li> <li><strong>Create</strong> a Dockerfile</li> <li><strong>Create</strong> a Docker ignore file</li> <li><strong>Build</strong> our image</li> <li><strong>Run</strong> our container</li></ul> <h3 id="scaffold-a-web-app"><a href="#scaffold-a-web-app" aria-hidden="true" class="header-anchor">#</a> Scaffold a Web App</h3> <p>First off we need a .Net Web app. We can create that by using the dotnet CLI like so:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>dotnet new webapp -o aspnetcoreapp
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>This will create a webapp that we name <code>aspnetcoreapp</code>.</p> <p>Now that we have our web app, let's focus on the Docker part that we are currently missing and need to add.</p> <h3 id="create-a-dockerfile"><a href="#create-a-dockerfile" aria-hidden="true" class="header-anchor">#</a> Create a Dockerfile</h3> <p>Ok in this part we will create a file called <code>Dockerfile</code>. Its job is to specify what OS we need, what commands we want to be installed, where to find our app code and lastly how to start up our application within the container. Look at the Dockerfile like a recipe for <em>what</em> and <em>how</em>. Ok then. Let's create it:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>touch Dockerfile
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>Specify image</strong></p> <p>For content, the first thing we need to define is an image we want to base it on. We also need to set a working directory where we want the files to end up on the container.
We do that with the command FROM and WORKDIR, like so:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code># Dockerfile
FROM mcr.microsoft.com/dotnet/core/sdk:2.2 AS build-env

WORKDIR /app
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>What we are saying here is to go grab an image with a small OS image made for .Net Core. We also say that our working directory is <code>/app</code>.</p> <p><strong>Copy project file</strong></p> <p>Next, we need to copy the project file ending in <code>.csproj</code>. Additionally, we also need to call <code>dotnet restore</code>, to ensure we install all specified dependencies, like so:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>COPY *.csproj ./
RUN dotnet restore
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>Copy and Build</strong></p> <p>Next, we need to copy our app files and build our app, like so:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>COPY . ./
RUN dotnet publish -c Release -o out
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>Build runtime image</strong></p> <p>Here we again specify our image and our working directory, like so:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>FROM mcr.microsoft.com/dotnet/core/aspnet:2.2
WORKDIR /app
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>There is a difference though, this time we want to copy our built files to <code>app/out</code>:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>COPY --from=build-env /app/out .
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>Starting the app</strong></p> <p>Finally, we add a command for how to start up our app. We do that with the command ENTRYPOINT. ENTRYPOINT takes an array that transforms into a command-line invocation with arguments. Our command looks like so:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>ENTRYPOINT [&quot;dotnet&quot;, &quot;aspnetcoreapp.dll&quot;]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>and simply means that it will invoke <code>dotnet aspnetcoreapp.dll</code> on the command line.</p> <p>The <code>Dockerfile</code> in its entirety looks like this:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>FROM mcr.microsoft.com/dotnet/core/sdk:2.2 AS build-env
WORKDIR /app

# Copy csproj and restore as distinct layers
COPY *.csproj ./
RUN dotnet restore

# Copy everything else and build
COPY . ./
RUN dotnet publish -c Release -o out

# Build runtime image
FROM mcr.microsoft.com/dotnet/core/aspnet:2.2
WORKDIR /app
COPY --from=build-env /app/out .
ENTRYPOINT [&quot;dotnet&quot;, &quot;aspnetcoreapp.dll&quot;]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="create-a-dockerignore-file"><a href="#create-a-dockerignore-file" aria-hidden="true" class="header-anchor">#</a> Create a .dockerignore file</h3> <p>Before we set out on our journey to build the instructions in the <code>Dockerfile</code> we need to address something, namely files/directories that we don't want. For this Docker tells us to create a file called <code>.dockerignore</code>. So what do we want in it? We want fast builds and to get that we need to ensure we don't directories like <code>bin</code> or <code>obj</code> in it.</p> <p>First, create your <code>.dockerignore</code> file:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>touch .dockerignore
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Enter the following in our <code>.dockerignore</code> file</p> <div class="language- line-numbers-mode"><pre class="language-text"><code># .dockerignore

Dockerfile
[b|B]in
[O|o]bj
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>NOTE, <code>#</code> is used for comments.</p> <h3 id="build-our-image-start-container"><a href="#build-our-image-start-container" aria-hidden="true" class="header-anchor">#</a> Build our image &amp; start container</h3> <p>At this point, we only have a recipe for what we want to do, namely our <code>Dockerfile</code>. From here we need to do things in two steps:</p> <ol><li>Creating an image from our Dockerfile</li> <li>Create and run a container from our image.</li></ol> <p><strong>Create our image</strong></p> <p>To create an image an image we can use the command <code>docker build</code>, like so:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker build -t aspnetcoreapp .
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>If we break this down a bit we see that we use <code>-t</code> to give our image a name. <code>aspnetcoreapp</code> becomes the image name. Our last argument is a punctuation <code>.</code> and means where we can find the <code>Dockerfile</code>, which in our case is the current directory.</p> <p>Running this command leads to first the .Net Core image being picked down, remember our FROM command:</p> <p><img src="https://thepracticaldev.s3.amazonaws.com/i/hhhycj6o9sft7vxjg510.png" alt=""></p> <p>Thereafter it processes all the remaining commands in our Dockerfile:</p> <p><img src="https://thepracticaldev.s3.amazonaws.com/i/5jfew3q5sy4q48bfq0pq.png" alt=""></p> <p>Above we can see that it <code>successfully tagged aspnetcoreapp:latest</code>. This means everything is good and we have an image. So how can we check that?</p> <p>Well, we can type the command <code>docker images</code>, like so:</p> <p><img src="https://thepracticaldev.s3.amazonaws.com/i/qb6vmjnamlpf6lerk4rp.png" alt=""></p> <p><strong>Create and run our container</strong></p> <p>At this point, we have an image. That's great. It contains our app code, commands utilities, OS and everything else we told it to contain. We need to start it. To do that we need to turn it into a container. We do that we the command <code>docker run</code>, like so:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker run -d -p 8080:80 --name myapp aspnetcoreapp
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Let's break down the command:</p> <ul><li><code>-d</code>, this simply means we run the container in the background.</li> <li><code>-p</code> that means we will match an external port to an internal container port. For some <code>Dockerfile</code> specification you need to explicitly expose an internal port, this is not needed in our case as it runs on port <code>80</code>. But let's be clear on the syntax <code>external port: internal port</code>. This means we connect our machines port <code>8080</code> to the internal container port <code>80</code>.</li> <li><code>--name</code>, this is us giving our container name, <code>myapp</code>. If we don't specify a name one will otherwise be generated for us. Having a name makes it easier to reference it later.</li></ul> <p>Our last argument is the image name <code>aspnetcoreapp</code>.</p> <p>Let's check that our container was created and is running with the command <code>docker ps</code>:</p> <p><img src="https://thepracticaldev.s3.amazonaws.com/i/ce849fhq70h1lfdaowkp.png" alt=""></p> <p>Lastly, let's check that our container is up and running by going to <code>http://localhost:8080</code>:</p> <p><img src="https://thepracticaldev.s3.amazonaws.com/i/8hcj976syi6z7b2aepsi.png" alt=""></p> <h2 id="clean-up"><a href="#clean-up" aria-hidden="true" class="header-anchor">#</a> Clean up</h2> <p>Right now we have created an image and container that is up and running. Over time you will have a ton of images and containers. This takes space so let's learn some Docker commands to keep this in check.</p> <p>To stop your container type <code>docker stop [docker name]</code>. So in our case, that would be:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker stop myapp
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Removing the container is done with:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker rm myapp
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>You can either stop/remove it using the name of the container or its id (at least the 3 first characters). You can find it's name by typing for example <code>docker ps</code>.</p> <p>Right now we have two images left, <code>aspnetcoreapp</code> that we built and one called <code>mcr.microsoft.com/dotnet/core/runtime:2.2</code> that we based our image on. To completely clean up we can use the command <code>docker rmi</code>, aka <em>remove image</em>, like so:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker rmi myimage:latest
docker rmi mcr.microsoft.com/dotnet/core/runtime:2.2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="summary"><a href="#summary" aria-hidden="true" class="header-anchor">#</a> Summary</h2> <p>We've taken our first steps with Docker in .Net Core. In doing so we discussed why containers and Docker.</p> <p>We've also learned to specify the contents of a <code>Dockerfile</code> file to specify what we want to go into an image. Furthermore, we learned to create <code>.dockerignore</code> file to specify what should NOT go into our image to ensure we small and fast builds.</p> <p>Additionally, we built and started our container.</p> <p>In our next part, we will look into building a Microservice and deploying it to the Cloud.</p> <h3 id="acknowledgements"><a href="#acknowledgements" aria-hidden="true" class="header-anchor">#</a> Acknowledgements</h3> <p>You should be following <a href="https://twitter.com/brunoborges" target="_blank" rel="noopener noreferrer">Bruno<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, Java Champion, DevOps expert</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.4c64a047.js" defer></script><script src="/assets/js/9.4bb2b8d6.js" defer></script><script src="/assets/js/4.4e8b8d29.js" defer></script><script src="/assets/js/117.15067f27.js" defer></script>
  </body>
</html>
