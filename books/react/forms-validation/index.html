<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React Book - Forms Validation</title>
    <meta name="description" content="">
    <head link="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-abap.js"></head>
    
    <link rel="preload" href="/assets/css/0.styles.702bdf73.css" as="style"><link rel="preload" href="/assets/js/app.4c64a047.js" as="script"><link rel="preload" href="/assets/js/10.3c14d46c.js" as="script"><link rel="preload" href="/assets/js/36.fbddd3e7.js" as="script"><link rel="prefetch" href="/assets/js/1.24c608c1.js"><link rel="prefetch" href="/assets/js/100.4d43d436.js"><link rel="prefetch" href="/assets/js/101.928f5dd0.js"><link rel="prefetch" href="/assets/js/102.1291f4db.js"><link rel="prefetch" href="/assets/js/103.cba36448.js"><link rel="prefetch" href="/assets/js/104.6aac54a0.js"><link rel="prefetch" href="/assets/js/105.515585f2.js"><link rel="prefetch" href="/assets/js/106.983710b4.js"><link rel="prefetch" href="/assets/js/107.1d6966ad.js"><link rel="prefetch" href="/assets/js/108.c23e0f28.js"><link rel="prefetch" href="/assets/js/109.7e7a671a.js"><link rel="prefetch" href="/assets/js/11.58d604c0.js"><link rel="prefetch" href="/assets/js/110.81e9f7f0.js"><link rel="prefetch" href="/assets/js/111.4f04c3ae.js"><link rel="prefetch" href="/assets/js/112.e8f82749.js"><link rel="prefetch" href="/assets/js/113.e282e4ab.js"><link rel="prefetch" href="/assets/js/114.9deea547.js"><link rel="prefetch" href="/assets/js/115.2699b070.js"><link rel="prefetch" href="/assets/js/116.a7bd26b0.js"><link rel="prefetch" href="/assets/js/117.15067f27.js"><link rel="prefetch" href="/assets/js/118.d56ef672.js"><link rel="prefetch" href="/assets/js/119.26491ecf.js"><link rel="prefetch" href="/assets/js/12.07aa0299.js"><link rel="prefetch" href="/assets/js/120.5ef5af10.js"><link rel="prefetch" href="/assets/js/121.9614405f.js"><link rel="prefetch" href="/assets/js/122.a6ee2ab7.js"><link rel="prefetch" href="/assets/js/123.258ec015.js"><link rel="prefetch" href="/assets/js/124.1a860943.js"><link rel="prefetch" href="/assets/js/125.f715af09.js"><link rel="prefetch" href="/assets/js/126.a55d6a7c.js"><link rel="prefetch" href="/assets/js/127.f477ddee.js"><link rel="prefetch" href="/assets/js/128.d56b3047.js"><link rel="prefetch" href="/assets/js/129.0c62c5b9.js"><link rel="prefetch" href="/assets/js/13.804669a3.js"><link rel="prefetch" href="/assets/js/130.21dd9e59.js"><link rel="prefetch" href="/assets/js/131.28c43f99.js"><link rel="prefetch" href="/assets/js/132.41823ed8.js"><link rel="prefetch" href="/assets/js/133.300eadcf.js"><link rel="prefetch" href="/assets/js/134.7371b34c.js"><link rel="prefetch" href="/assets/js/135.a42e9558.js"><link rel="prefetch" href="/assets/js/136.49feec95.js"><link rel="prefetch" href="/assets/js/137.394b6cbe.js"><link rel="prefetch" href="/assets/js/138.eeb38085.js"><link rel="prefetch" href="/assets/js/139.9459d54b.js"><link rel="prefetch" href="/assets/js/14.29c9effd.js"><link rel="prefetch" href="/assets/js/140.31cde3c8.js"><link rel="prefetch" href="/assets/js/141.1eb7f6e6.js"><link rel="prefetch" href="/assets/js/142.ab62220d.js"><link rel="prefetch" href="/assets/js/143.4b8d0353.js"><link rel="prefetch" href="/assets/js/144.300ee7ad.js"><link rel="prefetch" href="/assets/js/145.fada2630.js"><link rel="prefetch" href="/assets/js/146.f6446281.js"><link rel="prefetch" href="/assets/js/147.c2ae1a27.js"><link rel="prefetch" href="/assets/js/148.c0f0ad31.js"><link rel="prefetch" href="/assets/js/149.d5264867.js"><link rel="prefetch" href="/assets/js/15.94228c4c.js"><link rel="prefetch" href="/assets/js/150.5c74cddf.js"><link rel="prefetch" href="/assets/js/151.83781f0e.js"><link rel="prefetch" href="/assets/js/152.d2fba1ae.js"><link rel="prefetch" href="/assets/js/153.981e8922.js"><link rel="prefetch" href="/assets/js/154.6b6c18f4.js"><link rel="prefetch" href="/assets/js/155.b0badf10.js"><link rel="prefetch" href="/assets/js/156.4e76b85d.js"><link rel="prefetch" href="/assets/js/157.466eea0a.js"><link rel="prefetch" href="/assets/js/16.3fc83a1a.js"><link rel="prefetch" href="/assets/js/17.f01c72ab.js"><link rel="prefetch" href="/assets/js/18.0fbc545b.js"><link rel="prefetch" href="/assets/js/19.4162c2d8.js"><link rel="prefetch" href="/assets/js/20.05181376.js"><link rel="prefetch" href="/assets/js/21.6794696e.js"><link rel="prefetch" href="/assets/js/22.fe2d6c37.js"><link rel="prefetch" href="/assets/js/23.eb19d640.js"><link rel="prefetch" href="/assets/js/24.67aa5742.js"><link rel="prefetch" href="/assets/js/25.cd15d3b1.js"><link rel="prefetch" href="/assets/js/26.f604e2cc.js"><link rel="prefetch" href="/assets/js/27.1314f146.js"><link rel="prefetch" href="/assets/js/28.ffddf92c.js"><link rel="prefetch" href="/assets/js/29.52b086ff.js"><link rel="prefetch" href="/assets/js/3.95140222.js"><link rel="prefetch" href="/assets/js/30.688988c7.js"><link rel="prefetch" href="/assets/js/31.dc010477.js"><link rel="prefetch" href="/assets/js/32.0303ebae.js"><link rel="prefetch" href="/assets/js/33.4beb1729.js"><link rel="prefetch" href="/assets/js/34.cd9c78e2.js"><link rel="prefetch" href="/assets/js/35.cd6fc8ed.js"><link rel="prefetch" href="/assets/js/37.b51aaba8.js"><link rel="prefetch" href="/assets/js/38.bedf25d3.js"><link rel="prefetch" href="/assets/js/39.151f6522.js"><link rel="prefetch" href="/assets/js/4.4e8b8d29.js"><link rel="prefetch" href="/assets/js/40.2b130219.js"><link rel="prefetch" href="/assets/js/41.6c9c429e.js"><link rel="prefetch" href="/assets/js/42.ff9c13db.js"><link rel="prefetch" href="/assets/js/43.944e926a.js"><link rel="prefetch" href="/assets/js/44.97a6da64.js"><link rel="prefetch" href="/assets/js/45.caeb7a8d.js"><link rel="prefetch" href="/assets/js/46.c0647ac5.js"><link rel="prefetch" href="/assets/js/47.c7c1d6d6.js"><link rel="prefetch" href="/assets/js/48.ce27ad49.js"><link rel="prefetch" href="/assets/js/49.9eb0eddf.js"><link rel="prefetch" href="/assets/js/5.44d1fb4e.js"><link rel="prefetch" href="/assets/js/50.cb425e0f.js"><link rel="prefetch" href="/assets/js/51.c43b3926.js"><link rel="prefetch" href="/assets/js/52.49492f20.js"><link rel="prefetch" href="/assets/js/53.bc558480.js"><link rel="prefetch" href="/assets/js/54.0224790a.js"><link rel="prefetch" href="/assets/js/55.04bbe8e4.js"><link rel="prefetch" href="/assets/js/56.13cbe842.js"><link rel="prefetch" href="/assets/js/57.95f4c78c.js"><link rel="prefetch" href="/assets/js/58.e05884bd.js"><link rel="prefetch" href="/assets/js/59.0852a3bc.js"><link rel="prefetch" href="/assets/js/6.67cc1f3f.js"><link rel="prefetch" href="/assets/js/60.235d082b.js"><link rel="prefetch" href="/assets/js/61.457b8450.js"><link rel="prefetch" href="/assets/js/62.207a7dc7.js"><link rel="prefetch" href="/assets/js/63.5df8db04.js"><link rel="prefetch" href="/assets/js/64.0a279e8f.js"><link rel="prefetch" href="/assets/js/65.ce0af5ca.js"><link rel="prefetch" href="/assets/js/66.13a32b29.js"><link rel="prefetch" href="/assets/js/67.8aa05a96.js"><link rel="prefetch" href="/assets/js/68.f2b8b54a.js"><link rel="prefetch" href="/assets/js/69.d7e2ee25.js"><link rel="prefetch" href="/assets/js/7.e50b16ef.js"><link rel="prefetch" href="/assets/js/70.4964e7df.js"><link rel="prefetch" href="/assets/js/71.36f7adc7.js"><link rel="prefetch" href="/assets/js/72.8fdbfd29.js"><link rel="prefetch" href="/assets/js/73.9339e29f.js"><link rel="prefetch" href="/assets/js/74.1278934e.js"><link rel="prefetch" href="/assets/js/75.959e77e5.js"><link rel="prefetch" href="/assets/js/76.69afcb2d.js"><link rel="prefetch" href="/assets/js/77.d1006e5a.js"><link rel="prefetch" href="/assets/js/78.26cf6a79.js"><link rel="prefetch" href="/assets/js/79.ff46ea75.js"><link rel="prefetch" href="/assets/js/8.988484b0.js"><link rel="prefetch" href="/assets/js/80.a9c71dc8.js"><link rel="prefetch" href="/assets/js/81.cd32c4e1.js"><link rel="prefetch" href="/assets/js/82.c1f25195.js"><link rel="prefetch" href="/assets/js/83.c3f5ddec.js"><link rel="prefetch" href="/assets/js/84.bd05dad9.js"><link rel="prefetch" href="/assets/js/85.b7fe7f91.js"><link rel="prefetch" href="/assets/js/86.e3ece45a.js"><link rel="prefetch" href="/assets/js/87.feed8e3f.js"><link rel="prefetch" href="/assets/js/88.631724ab.js"><link rel="prefetch" href="/assets/js/89.8d4600f4.js"><link rel="prefetch" href="/assets/js/9.4bb2b8d6.js"><link rel="prefetch" href="/assets/js/90.79dfe307.js"><link rel="prefetch" href="/assets/js/91.2d7b1a33.js"><link rel="prefetch" href="/assets/js/92.be05131f.js"><link rel="prefetch" href="/assets/js/93.9815a284.js"><link rel="prefetch" href="/assets/js/94.a32b839b.js"><link rel="prefetch" href="/assets/js/95.24944fdc.js"><link rel="prefetch" href="/assets/js/96.a2057ed3.js"><link rel="prefetch" href="/assets/js/97.0bf41173.js"><link rel="prefetch" href="/assets/js/98.ce30c36c.js"><link rel="prefetch" href="/assets/js/99.1c8ba3b6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.702bdf73.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="book-layout" data-v-4dacc20a><div class="left" data-v-4dacc20a><div class="book-detail" data-v-d992904e data-v-4dacc20a><div data-v-d992904e><div data-v-d992904e><!----> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth1" data-v-d992904e><!----> <span data-v-d992904e>React Book - Basics</span></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/react/jsx/" class="title" data-v-d992904e>React Book - JSX</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/react/setup/" class="title" data-v-d992904e>React Book - Set up</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/react/components/" class="title" data-v-d992904e>React Book - Component introduction</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/react/props/" class="title" data-v-d992904e>React Book - Props</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/react/state/" class="title" data-v-d992904e>React Book - State</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/react/methods/" class="title" data-v-d992904e>React Book - Methods</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/react/thinkingincomponents/" class="title" data-v-d992904e>React Book - Thinking in Components</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/react/conditional/" class="title" data-v-d992904e>React Book - Conditional rendering</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2 selected" data-v-d992904e><a href="/books/react/forms-validation/" class="title selected" data-v-d992904e>React Book - Forms Validation</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/react/forms/" class="title" data-v-d992904e>React Book - Forms</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/react/formik-partII/" class="title" data-v-d992904e>React Book - Formik part II</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/react/formik-partI/" class="title" data-v-d992904e>React Book - Formik part I</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth1" data-v-d992904e><!----> <span data-v-d992904e>React Book - Styling</span></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/react/styledcomponents/" class="title" data-v-d992904e>React Book - Styled components</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/react/inlinestyling/" class="title" data-v-d992904e>React Book - Inline styling</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth1" data-v-d992904e><!----> <span data-v-d992904e>React Book - Images</span></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/react/adding-images/" class="title" data-v-d992904e>React Book - Addding Images</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth1" data-v-d992904e><!----> <span data-v-d992904e>React Book - Routing</span></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/react/routing/" class="title" data-v-d992904e>React Book - Core Concepts</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/react/router-parameters/" class="title" data-v-d992904e>React Book - Router and Query params</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/react/programmatic-routing/" class="title" data-v-d992904e>React Book - Programmatic Navigation</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/react/lazy-loading/" class="title" data-v-d992904e>React Book - Lazy Loading</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth1" data-v-d992904e><!----> <span data-v-d992904e>React Book - Advanced patterns</span></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/react/context/" class="title" data-v-d992904e>React Book - Context API</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/react/hooks/" class="title" data-v-d992904e>React Book - Hooks</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/react/render-props/" class="title" data-v-d992904e>React Book - Render props</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth1" data-v-d992904e><!----> <span data-v-d992904e>React Book - Testing</span></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/react/jest/" class="title" data-v-d992904e>React Book - Jest</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/react/nock/" class="title" data-v-d992904e>React Book - Nock</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/react/react-testing-library/" class="title" data-v-d992904e>React Book - React Testing Library</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth1" data-v-d992904e><!----> <span data-v-d992904e>React Book - Redux</span></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/react/redux/" class="title" data-v-d992904e>React Book - Redux</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/react/redux-actions/" class="title" data-v-d992904e>React Book - Actions</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/react/redux-reducers/" class="title" data-v-d992904e>React Book - Reducers</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/react/redux-store/" class="title" data-v-d992904e>React Book - Store</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/react/react-and-redux/" class="title" data-v-d992904e>React Book - Adding Redux to React</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/react/redux-side-effects/" class="title" data-v-d992904e>React Book - Side effects</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/react/redux-form/" class="title" data-v-d992904e>React Book - Redux Form</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth1" data-v-d992904e><!----> <span data-v-d992904e>React Book - Libraries</span></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/react/storybook/" class="title" data-v-d992904e>React Book - Storybook</a> <!----></div> <div data-v-d992904e>
      
    </div></div></div></div> <div class="right theme-default-content" data-v-4dacc20a><div class="navigation" data-v-4dacc20a><a href="/books/react/formik-partI" data-v-4dacc20a> Formik, part I &gt;</a></div> <div class="content__default" data-v-4dacc20a><h1 id="forms-ii-validation"><a href="#forms-ii-validation" aria-hidden="true" class="header-anchor">#</a> Forms II - validation</h1> <p>Follow me on <a href="https://twitter.com/chris_noring" target="_blank" rel="noopener noreferrer">Twitter<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, happy to take your suggestions on topics or improvements /Chris</p> <p>Validating forms can be done in different ways:</p> <ul><li>Validate an element as soon as you type, and immediately indicate any error</li> <li>Validate the form on pressing submit</li></ul> <h2 id="validate-an-element"><a href="#validate-an-element" aria-hidden="true" class="header-anchor">#</a> Validate an element</h2> <p>You can have all the elements and their validation in one giant component but it is usually better to create a dedicated component for this. A component like this should have the following:</p> <ul><li>render the element itself, this will give us more control over how the element is rendered</li> <li>an element where you can output the validation error</li> <li>a way to listen to changes and validate itself while the user types</li> <li>a way to indicate to the form that it is no longer valid should a validation error occur</li></ul> <h3 id="render-the-element"><a href="#render-the-element" aria-hidden="true" class="header-anchor">#</a> Render the element</h3> <p>With this one we mean that we need to create a component around our element. To do so is quite simple:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Input</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>input <span class="token punctuation">{</span> <span class="token operator">...</span>this<span class="token punctuation">.</span>props<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>As you can see above we make the <code>Input</code> component render an <code>input</code> element tag. We also ensure that all properties set on the component make it to the underlying input by typing <code>{ ...this.props}</code>. A more manual version of the last one would be to type:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;input title={this.props.title} value={this.props.value} ... &gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Depending on how many attributes we want to send to the underlying input, it could be quite a lot of typing.</p> <p>As we are now in control of how the <code>input</code> is rendered we can do all sorts of things like adding a <code>div</code> element, give it padding, margin, borders etc. Best part is we can reuse this component in a lot of places and all of our inputs will look nice and consistent.</p> <h3 id="adding-validation"><a href="#adding-validation" aria-hidden="true" class="header-anchor">#</a> Adding validation</h3> <p>Now we will see that it pays off to wrap our <code>input</code> element in a component. Adding validation to our element is as easy as:</p> <ul><li>add element placeholder where your error should be shown</li> <li>add a function that validates the input value</li> <li>validate on every value change, we need to add a callback to <code>onChange</code></li></ul> <h4 id="render-the-error"><a href="#render-the-error" aria-hidden="true" class="header-anchor">#</a> Render the error</h4> <p>Alter the <code>render()</code> method to the below:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>InputContainer<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>error <span class="token operator">&amp;&amp;</span>
      <span class="token operator">&lt;</span>ErrorMessage<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>error<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>ErrorMessage<span class="token operator">&gt;</span>
      <span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>desc<span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>InnerInput value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>data<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token operator">...</span>this<span class="token punctuation">.</span>props<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>InputContainer<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>Here we are conditionally displaying the error message, assuming its on the state:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>error <span class="token operator">&amp;&amp;</span>
  <span class="token operator">&lt;</span>ErrorMessage<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>error<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>ErrorMessage<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>We are also hooking up a <code>handleChange()</code> method to <code>onChange</code>.</p> <h4 id="adding-validation-function"><a href="#adding-validation-function" aria-hidden="true" class="header-anchor">#</a> Adding validation function</h4> <p>Next step is adding our validation function:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">validate</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">val<span class="token punctuation">,</span> errMessage</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
<span class="token keyword">const</span> valid <span class="token operator">=</span> <span class="token regex">/^[0-9]{2,3}$/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> valid <span class="token operator">?</span> <span class="token string">''</span> <span class="token punctuation">:</span> errMessage<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Our function above simply tests wether our input value matches a RegEx pattern and if so its valid, if not, then we return the error message.</p> <h4 id="managing-the-state"><a href="#managing-the-state" aria-hidden="true" class="header-anchor">#</a> Managing the state</h4> <p>So who is calling this function? Well the <code>handleChange()</code> method is, like so:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function-variable function">handleChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> errMessage <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>

  <span class="token keyword">const</span> error <span class="token operator">=</span> <span class="token function">validate</span><span class="token punctuation">(</span>ev<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">,</span> errMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    data<span class="token punctuation">:</span> ev<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
    error<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>We do two things here, firstly we call <code>validate()</code> to see if there was an error and secondly we set the state, which is our value and the error. If the error is an empty string then it is counted as <code>falsy</code>. So we can always safely set the error property and any error message would only be visible when it should be visible.</p> <p>The full code for our component so far looks like this:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> styled <span class="token keyword">from</span> <span class="token string">'styled-components'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> PropTypes <span class="token keyword">from</span> <span class="token string">'prop-types'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> InnerInput <span class="token operator">=</span> styled<span class="token punctuation">.</span>input<span class="token template-string"><span class="token string">`
  font-size: 20px;
`</span></span><span class="token punctuation">;</span>

<span class="token keyword">const</span> InputContainer <span class="token operator">=</span> styled<span class="token punctuation">.</span>div<span class="token template-string"><span class="token string">`
  padding: 20px;
  border: solid 1px grey;
`</span></span><span class="token punctuation">;</span>

<span class="token keyword">const</span> ErrorMessage <span class="token operator">=</span> styled<span class="token punctuation">.</span>div<span class="token template-string"><span class="token string">`
  padding: 20px;
  border: red;
  background: pink;
  color: white;
`</span></span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">validate</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">val<span class="token punctuation">,</span> errMessage</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> valid <span class="token operator">=</span> <span class="token regex">/^[0-9]{2,3}$/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> valid <span class="token operator">?</span> <span class="token string">''</span> <span class="token punctuation">:</span> errMessage<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Input</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">,</span>
    desc<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">,</span>
    errMessage<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    error<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    data<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>

  <span class="token function-variable function">handleChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> errMessage<span class="token punctuation">,</span> name <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>

    <span class="token keyword">const</span> error <span class="token operator">=</span> <span class="token function">validate</span><span class="token punctuation">(</span>ev<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">,</span> errMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      data<span class="token punctuation">:</span> ev<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
      error<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>InputContainer<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>error <span class="token operator">&amp;&amp;</span>
      <span class="token operator">&lt;</span>ErrorMessage<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>error<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>ErrorMessage<span class="token operator">&gt;</span>
      <span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>desc<span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>InnerInput value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>data<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token operator">...</span>this<span class="token punctuation">.</span>props<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>InputContainer<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Input<span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br></div></div><h3 id="telling-the-form"><a href="#telling-the-form" aria-hidden="true" class="header-anchor">#</a> Telling the form</h3> <p>Usually when you put input elements in a form you want to be able to tell the form that one or more invalid inputs exist and you want the stop the form from being submitted. To do so we need send a message to our form every time a value changes and if there is a validation error, the form will know. To accomplish that we need to do the following:</p> <ul><li>add a <code>notify</code> input property, this will be a function we can call as soon as we validated the latest change</li> <li>call the <code>notify</code> function</li></ul> <p>We there update our <code>handleChange()</code> method to now make a call to the <code>notify()</code> function that we pass in, like so:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function-variable function">handleChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> errMessage<span class="token punctuation">,</span> name<span class="token punctuation">,</span> notify <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>

  <span class="token keyword">const</span> error <span class="token operator">=</span> <span class="token function">validate</span><span class="token punctuation">(</span>ev<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">,</span> errMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">notify</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> error <span class="token operator">===</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    data<span class="token punctuation">:</span> ev<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
    error<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><code>notify()</code> is called with two params, <code>name</code> and wether it is valid.</p> <h4 id="setting-up-the-form"><a href="#setting-up-the-form" aria-hidden="true" class="header-anchor">#</a> Setting up the form</h4> <p>Ok great, we have a way to communicate errors back to the form, what about the form itself, what does it need to do for this to work? It needs the following:</p> <ul><li>a method that it can hook up the <code>notify</code> property</li> <li>determine what to do if one or more elements are invalid, like for example disable the submit button</li></ul> <p>We decide on creating a dedicated component for our form as well:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> styled <span class="token keyword">from</span> <span class="token string">'styled-components'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Input <span class="token keyword">from</span> <span class="token string">'./Input'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> FormContainer <span class="token operator">=</span> styled<span class="token punctuation">.</span>form<span class="token template-string"><span class="token string">`
border: solid 2px;
padding: 20px;
`</span></span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Form</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    isValid<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>

  <span class="token function-variable function">notify</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> isValid</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>FormContainer<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Input
          errMessage<span class="token operator">=</span><span class="token string">&quot;Must contain 2-3 digits&quot;</span>
          desc<span class="token operator">=</span><span class="token string">&quot;2-3 characters&quot;</span>
          name<span class="token operator">=</span><span class="token string">&quot;first-name&quot;</span>
          notify<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>notify<span class="token punctuation">}</span>
          title<span class="token operator">=</span><span class="token string">&quot;I am a custom inbox&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>Submit<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>FormContainer<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Form<span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p>At this point we have hooked up our notify <code>input</code> property to a method on our component called <code>notify()</code>, like so:</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Input</span>
  <span class="token attr-name">errMessage</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Must contain 2-3 digits<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">desc</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>2-3 characters<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>first-name<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">notify</span><span class="token attr-value"><span class="token punctuation">=</span>{this.notify}</span>
  <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>I am a custom inbox<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>As you can see our <code>notify()</code> method doesn't do much yet, but it will:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>notify = (name, isValid) =&gt; {}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>So what do we need to accomplish with a call to <code>notify()</code> ? The first thing we need to accomplish is telling the form that one of your inputs is invalid. The other is to set the whole form as invalid. Based on that we define our <code>notify()</code> code as the following:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function-variable function">notify</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> isValid</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">:</span> isValid<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      isValid<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">validForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>We see above that we after having updated our state for our input element we set the state for <code>isValid</code> and call the method <code>validForm()</code> to determine its value. The reason for setting the <code>isValid</code> state like this is that <code>setState()</code> doesn't happen straight away so it is only in the callback that we can guarantee that it's state has been updated.</p> <p><code>isValid</code> is the property we will use in the markup to determine wether our form is valid. Let's define the method <code>validForm()</code> next:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function-variable function">validForm</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> keys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> keys<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>keys<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'isValid'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">continue</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">[</span>keys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>Above we are looping through our state and is looking for wether one of the input elements are invalid. We skip <code>isValid</code> as that is not an element state.</p> <h4 id="determine-form-state"><a href="#determine-form-state" aria-hidden="true" class="header-anchor">#</a> Determine form state</h4> <p>We have now set everything up to make it easy to indicate wether the form can be submitted or not. We can handle that in two ways:</p> <ul><li>disabling the submit button</li> <li>let the user press the submit button but stop the submit from going through</li></ul> <p>If we do the first variant we only need to change the markup to the following:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>FormContainer onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleSubmit<span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Input
          errMessage<span class="token operator">=</span><span class="token string">&quot;Must contain 2-3 digits&quot;</span>
          desc<span class="token operator">=</span><span class="token string">&quot;2-3 characters&quot;</span>
          name<span class="token operator">=</span><span class="token string">&quot;first-name&quot;</span>
          notify<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>notify<span class="token punctuation">}</span>
          title<span class="token operator">=</span><span class="token string">&quot;I am a custom inbox&quot;</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button disabled<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isValid<span class="token punctuation">}</span><span class="token operator">&gt;</span>Submit<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>FormContainer<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>Let's zoom in on the interesting bit:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;button disabled={!this.state.isValid}&gt;Submit&lt;/button&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>We read from our <code>isValid</code> property and we are to disable our button when we want.</p> <p>The other version of stopping the submit from going through involves us adding some logic to the method <code>handleSubmit()</code>:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function-variable function">handleSubmit</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  ev<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isValid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'form is NOT valid'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'valid form'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></div> <div class="navigation" data-v-4dacc20a><a href="/books/react/formik-partI" data-v-4dacc20a> Formik, part I &gt;</a></div></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.4c64a047.js" defer></script><script src="/assets/js/10.3c14d46c.js" defer></script><script src="/assets/js/36.fbddd3e7.js" defer></script>
  </body>
</html>
