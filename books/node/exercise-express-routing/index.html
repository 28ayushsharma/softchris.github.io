<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Node.js Book - Exercise express routing</title>
    <meta name="description" content="">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    
    <link rel="preload" href="/assets/css/0.styles.23d22851.css" as="style"><link rel="preload" href="/assets/js/app.af1af9d9.js" as="script"><link rel="preload" href="/assets/js/10.50c128a6.js" as="script"><link rel="preload" href="/assets/js/47.3bc4cde3.js" as="script"><link rel="prefetch" href="/assets/js/1.36663999.js"><link rel="prefetch" href="/assets/js/100.832843ee.js"><link rel="prefetch" href="/assets/js/101.a0f346f6.js"><link rel="prefetch" href="/assets/js/102.d3a51c53.js"><link rel="prefetch" href="/assets/js/103.42e5967c.js"><link rel="prefetch" href="/assets/js/104.f2848816.js"><link rel="prefetch" href="/assets/js/105.975c7b9f.js"><link rel="prefetch" href="/assets/js/106.d1698fcc.js"><link rel="prefetch" href="/assets/js/107.e66c0625.js"><link rel="prefetch" href="/assets/js/108.84025cf9.js"><link rel="prefetch" href="/assets/js/109.5f1bf948.js"><link rel="prefetch" href="/assets/js/11.a104adc8.js"><link rel="prefetch" href="/assets/js/110.b06025c1.js"><link rel="prefetch" href="/assets/js/111.b728f009.js"><link rel="prefetch" href="/assets/js/112.2f202e84.js"><link rel="prefetch" href="/assets/js/113.30083b82.js"><link rel="prefetch" href="/assets/js/114.a601f1c2.js"><link rel="prefetch" href="/assets/js/115.6413aa2d.js"><link rel="prefetch" href="/assets/js/116.44cdb765.js"><link rel="prefetch" href="/assets/js/117.3fa386ab.js"><link rel="prefetch" href="/assets/js/118.8bd003cb.js"><link rel="prefetch" href="/assets/js/119.1ea9eae7.js"><link rel="prefetch" href="/assets/js/12.02e6e552.js"><link rel="prefetch" href="/assets/js/120.63c1786f.js"><link rel="prefetch" href="/assets/js/121.4f580578.js"><link rel="prefetch" href="/assets/js/122.533a0953.js"><link rel="prefetch" href="/assets/js/123.37bf1483.js"><link rel="prefetch" href="/assets/js/124.92ff020a.js"><link rel="prefetch" href="/assets/js/125.2513705b.js"><link rel="prefetch" href="/assets/js/126.ac7f0ed9.js"><link rel="prefetch" href="/assets/js/127.144659e8.js"><link rel="prefetch" href="/assets/js/128.b1c51db9.js"><link rel="prefetch" href="/assets/js/129.25930a42.js"><link rel="prefetch" href="/assets/js/13.215ad842.js"><link rel="prefetch" href="/assets/js/130.ba23dc59.js"><link rel="prefetch" href="/assets/js/131.02fed567.js"><link rel="prefetch" href="/assets/js/132.ee400e80.js"><link rel="prefetch" href="/assets/js/133.1f0c2bd1.js"><link rel="prefetch" href="/assets/js/134.8942c410.js"><link rel="prefetch" href="/assets/js/135.056c0cd5.js"><link rel="prefetch" href="/assets/js/136.6022a2fc.js"><link rel="prefetch" href="/assets/js/137.45937168.js"><link rel="prefetch" href="/assets/js/138.a9c534e4.js"><link rel="prefetch" href="/assets/js/139.37a778b2.js"><link rel="prefetch" href="/assets/js/14.1a060010.js"><link rel="prefetch" href="/assets/js/140.b40b4810.js"><link rel="prefetch" href="/assets/js/141.bc3e7a66.js"><link rel="prefetch" href="/assets/js/142.17143dc7.js"><link rel="prefetch" href="/assets/js/143.5dd23bb9.js"><link rel="prefetch" href="/assets/js/144.3bc3648b.js"><link rel="prefetch" href="/assets/js/145.ce7f777e.js"><link rel="prefetch" href="/assets/js/146.3d86f6eb.js"><link rel="prefetch" href="/assets/js/147.bf8a0bfa.js"><link rel="prefetch" href="/assets/js/148.6d6dcd45.js"><link rel="prefetch" href="/assets/js/149.8e89a8fe.js"><link rel="prefetch" href="/assets/js/15.34674cd6.js"><link rel="prefetch" href="/assets/js/150.419c0b3b.js"><link rel="prefetch" href="/assets/js/151.1902893c.js"><link rel="prefetch" href="/assets/js/152.fc680915.js"><link rel="prefetch" href="/assets/js/153.786183f8.js"><link rel="prefetch" href="/assets/js/154.30c0db9d.js"><link rel="prefetch" href="/assets/js/155.6a1f1414.js"><link rel="prefetch" href="/assets/js/156.f6a0290f.js"><link rel="prefetch" href="/assets/js/157.7e09af6b.js"><link rel="prefetch" href="/assets/js/158.34e5cfb5.js"><link rel="prefetch" href="/assets/js/159.dc9e63e0.js"><link rel="prefetch" href="/assets/js/16.119e91d4.js"><link rel="prefetch" href="/assets/js/160.45b46a8a.js"><link rel="prefetch" href="/assets/js/161.3545c817.js"><link rel="prefetch" href="/assets/js/162.61db4022.js"><link rel="prefetch" href="/assets/js/163.42fd3ede.js"><link rel="prefetch" href="/assets/js/164.8c253021.js"><link rel="prefetch" href="/assets/js/165.d5b2afe5.js"><link rel="prefetch" href="/assets/js/166.5a4d6a33.js"><link rel="prefetch" href="/assets/js/167.025f9a1f.js"><link rel="prefetch" href="/assets/js/168.dd263cd9.js"><link rel="prefetch" href="/assets/js/169.1cebceae.js"><link rel="prefetch" href="/assets/js/17.780050f1.js"><link rel="prefetch" href="/assets/js/170.eef09a30.js"><link rel="prefetch" href="/assets/js/171.568d00eb.js"><link rel="prefetch" href="/assets/js/172.13bdd851.js"><link rel="prefetch" href="/assets/js/173.ac3523e4.js"><link rel="prefetch" href="/assets/js/174.7a16fba0.js"><link rel="prefetch" href="/assets/js/175.b5970f62.js"><link rel="prefetch" href="/assets/js/176.771f1b60.js"><link rel="prefetch" href="/assets/js/177.86bf5b1e.js"><link rel="prefetch" href="/assets/js/178.9d15da32.js"><link rel="prefetch" href="/assets/js/179.2cb4394d.js"><link rel="prefetch" href="/assets/js/18.fbe87828.js"><link rel="prefetch" href="/assets/js/180.738da0ec.js"><link rel="prefetch" href="/assets/js/181.4770036a.js"><link rel="prefetch" href="/assets/js/182.0a78f9b3.js"><link rel="prefetch" href="/assets/js/183.0c345a9c.js"><link rel="prefetch" href="/assets/js/184.cf15e5be.js"><link rel="prefetch" href="/assets/js/185.1c546640.js"><link rel="prefetch" href="/assets/js/186.d6abcecf.js"><link rel="prefetch" href="/assets/js/187.5ff401b6.js"><link rel="prefetch" href="/assets/js/188.b0882483.js"><link rel="prefetch" href="/assets/js/189.0455c7b7.js"><link rel="prefetch" href="/assets/js/19.910fc8d0.js"><link rel="prefetch" href="/assets/js/190.042d2868.js"><link rel="prefetch" href="/assets/js/191.110498b8.js"><link rel="prefetch" href="/assets/js/192.0a19375a.js"><link rel="prefetch" href="/assets/js/193.bc494463.js"><link rel="prefetch" href="/assets/js/194.f832c37a.js"><link rel="prefetch" href="/assets/js/195.e9a440c0.js"><link rel="prefetch" href="/assets/js/196.c002e70b.js"><link rel="prefetch" href="/assets/js/20.f2e93d17.js"><link rel="prefetch" href="/assets/js/21.710dadb0.js"><link rel="prefetch" href="/assets/js/22.f4b7a74b.js"><link rel="prefetch" href="/assets/js/23.7da86901.js"><link rel="prefetch" href="/assets/js/24.b2baa9f8.js"><link rel="prefetch" href="/assets/js/25.a9fce161.js"><link rel="prefetch" href="/assets/js/26.e3ef402c.js"><link rel="prefetch" href="/assets/js/27.9c9ebb3b.js"><link rel="prefetch" href="/assets/js/28.a55074a2.js"><link rel="prefetch" href="/assets/js/29.13d9e4e3.js"><link rel="prefetch" href="/assets/js/3.970a66a4.js"><link rel="prefetch" href="/assets/js/30.ad0fbce9.js"><link rel="prefetch" href="/assets/js/31.25cf2c1f.js"><link rel="prefetch" href="/assets/js/32.51b88a96.js"><link rel="prefetch" href="/assets/js/33.3cc89912.js"><link rel="prefetch" href="/assets/js/34.9e368969.js"><link rel="prefetch" href="/assets/js/35.2c5a0b70.js"><link rel="prefetch" href="/assets/js/36.e4573f18.js"><link rel="prefetch" href="/assets/js/37.63e8a86e.js"><link rel="prefetch" href="/assets/js/38.1264e174.js"><link rel="prefetch" href="/assets/js/39.94b70e03.js"><link rel="prefetch" href="/assets/js/4.eac68367.js"><link rel="prefetch" href="/assets/js/40.d12fbfe2.js"><link rel="prefetch" href="/assets/js/41.4bb61af4.js"><link rel="prefetch" href="/assets/js/42.6ccb4ffa.js"><link rel="prefetch" href="/assets/js/43.0bd65cf1.js"><link rel="prefetch" href="/assets/js/44.0da39d02.js"><link rel="prefetch" href="/assets/js/45.89a5cd81.js"><link rel="prefetch" href="/assets/js/46.d37e8de5.js"><link rel="prefetch" href="/assets/js/48.ab8e19ae.js"><link rel="prefetch" href="/assets/js/49.f6392227.js"><link rel="prefetch" href="/assets/js/5.d1da013e.js"><link rel="prefetch" href="/assets/js/50.13c266ab.js"><link rel="prefetch" href="/assets/js/51.2cf06978.js"><link rel="prefetch" href="/assets/js/52.56c2b7ed.js"><link rel="prefetch" href="/assets/js/53.4d5b9ce7.js"><link rel="prefetch" href="/assets/js/54.eb903e59.js"><link rel="prefetch" href="/assets/js/55.0b31ff36.js"><link rel="prefetch" href="/assets/js/56.d346ae56.js"><link rel="prefetch" href="/assets/js/57.453c651d.js"><link rel="prefetch" href="/assets/js/58.f7fff5bb.js"><link rel="prefetch" href="/assets/js/59.a537c130.js"><link rel="prefetch" href="/assets/js/6.9bdf2d86.js"><link rel="prefetch" href="/assets/js/60.08da46b5.js"><link rel="prefetch" href="/assets/js/61.883f6c71.js"><link rel="prefetch" href="/assets/js/62.b1e24215.js"><link rel="prefetch" href="/assets/js/63.9898efdc.js"><link rel="prefetch" href="/assets/js/64.0d28ede5.js"><link rel="prefetch" href="/assets/js/65.d2e52c68.js"><link rel="prefetch" href="/assets/js/66.2e6b6c8e.js"><link rel="prefetch" href="/assets/js/67.860a252d.js"><link rel="prefetch" href="/assets/js/68.006a7e36.js"><link rel="prefetch" href="/assets/js/69.f6bbc7ee.js"><link rel="prefetch" href="/assets/js/7.8cd56b2f.js"><link rel="prefetch" href="/assets/js/70.4a3f6622.js"><link rel="prefetch" href="/assets/js/71.fd35d7b5.js"><link rel="prefetch" href="/assets/js/72.c2526cec.js"><link rel="prefetch" href="/assets/js/73.12ae69ce.js"><link rel="prefetch" href="/assets/js/74.c0c7a51b.js"><link rel="prefetch" href="/assets/js/75.25d5902a.js"><link rel="prefetch" href="/assets/js/76.7dc31228.js"><link rel="prefetch" href="/assets/js/77.da0cc43e.js"><link rel="prefetch" href="/assets/js/78.4e9609ce.js"><link rel="prefetch" href="/assets/js/79.986ee003.js"><link rel="prefetch" href="/assets/js/8.6b13a443.js"><link rel="prefetch" href="/assets/js/80.00dfb645.js"><link rel="prefetch" href="/assets/js/81.acd2f5e5.js"><link rel="prefetch" href="/assets/js/82.9cd614f2.js"><link rel="prefetch" href="/assets/js/83.1bec09df.js"><link rel="prefetch" href="/assets/js/84.1e80b79f.js"><link rel="prefetch" href="/assets/js/85.8c792b81.js"><link rel="prefetch" href="/assets/js/86.fd5f6771.js"><link rel="prefetch" href="/assets/js/87.165b1e45.js"><link rel="prefetch" href="/assets/js/88.596bd09a.js"><link rel="prefetch" href="/assets/js/89.5b99d208.js"><link rel="prefetch" href="/assets/js/9.454b5262.js"><link rel="prefetch" href="/assets/js/90.ef8ec74a.js"><link rel="prefetch" href="/assets/js/91.11861aad.js"><link rel="prefetch" href="/assets/js/92.f68b9b5c.js"><link rel="prefetch" href="/assets/js/93.772ba160.js"><link rel="prefetch" href="/assets/js/94.35695a02.js"><link rel="prefetch" href="/assets/js/95.c89696a1.js"><link rel="prefetch" href="/assets/js/96.223a0481.js"><link rel="prefetch" href="/assets/js/97.0ad4d44e.js"><link rel="prefetch" href="/assets/js/98.68b8aba4.js"><link rel="prefetch" href="/assets/js/99.1d4527be.js">
    <link rel="stylesheet" href="/assets/css/0.styles.23d22851.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="book-layout" data-v-f2b31bf6><div class="left" data-v-f2b31bf6><div class="book-detail" data-v-d992904e data-v-f2b31bf6><div data-v-d992904e><div data-v-d992904e><!----> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth1" data-v-d992904e><!----> <span data-v-d992904e>Node.js Book - Install</span></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth1" data-v-d992904e><!----> <span data-v-d992904e>Node.js Book - IO</span></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth1" data-v-d992904e><!----> <span data-v-d992904e>Node.js Book - HTTP</span></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/node/http-introduction/" class="title" data-v-d992904e>Node.js Book - HTTP introduction</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/node/http-server/" class="title" data-v-d992904e>Node.js Book - HTTP Server</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/node/exercise-http-server/" class="title" data-v-d992904e>Node.js Book - Exercise HTTP Server</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/node/http-status-codes/" class="title" data-v-d992904e>Node.js Book - HTTP Status codes</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/node/exercise-status-codes/" class="title" data-v-d992904e>Node.js Book - Exercise - Status codes</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/node/http-headers/" class="title" data-v-d992904e>Node.js Book - HTTP Headers</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/node/exercise-http-headers/" class="title" data-v-d992904e>Node.js Book - Exercise HTTP Headers</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/node/http-content/" class="title" data-v-d992904e>Node.js Book - HTTP Content types</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/node/exercise-http-content/" class="title" data-v-d992904e>Node.js Book - Exercise HTTP Content types</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth1" data-v-d992904e><!----> <span data-v-d992904e>Node.js Book - Express</span></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/node/express-introduction/" class="title" data-v-d992904e>Node.js Book - Express introduction</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/node/exercise-express/" class="title" data-v-d992904e>Node.js Book - Exercise express</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/node/express-routing/" class="title" data-v-d992904e>Node.js Book - Express routing</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2 selected" data-v-d992904e><a href="/books/node/exercise-express-routing/" class="title selected" data-v-d992904e>Node.js Book - Exercise express routing</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/node/express-middleware/" class="title" data-v-d992904e>Node.js Book -  Express middleware</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/node/exercise-express-middleware/" class="title" data-v-d992904e>Node.js Book -  Exercise express middleware</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/node/express-forms/" class="title" data-v-d992904e>Node.js Book -  Express forms</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/node/exercise-express-forms/" class="title" data-v-d992904e>Node.js Book - Exercise express forms</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/node/express-file/" class="title" data-v-d992904e>Node.js Book - Express file upload</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/node/http-routing/" class="title" data-v-d992904e>Node.js Book - HTTP Routing</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/node/exercise-http-routing/" class="title" data-v-d992904e>Node.js Book - Exercise HTTP Routing</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/node/http-client/" class="title" data-v-d992904e>Node.js Book - HTTP Client</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/node/exercise-http-client/" class="title" data-v-d992904e>Node.js Book - Exercise HTTP Client</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/node/exercise-express-file/" class="title" data-v-d992904e>Node.js Book - Exercise file upload</a> <!----></div> <div data-v-d992904e>
      
    </div></div></div></div> <div class="right theme-default-content" data-v-f2b31bf6><div class="social" data-v-f2b31bf6><div data-v-f2b31bf6><span tabindex="0" data-link="#share-facebook"><i class="fa fa-facebook"></i> Facebook
          </span> <span tabindex="0" data-link="#share-linkedin"><i class="fa fa-linkedin"></i> LinkedIn
          </span> <span tabindex="0" data-link="#share-reddit"><i class="fa fa-reddit"></i> Reddit
          </span> <span tabindex="0" data-link="#share-twitter"><i class="fa fa-twitter"></i> Twitter
          </span></div></div> <div class="navigation" data-v-f2b31bf6><a href="/books/node/exercise-express-routing" data-v-f2b31bf6> HTTP Server &gt;</a></div> <div class="content__default" data-v-f2b31bf6><h1 id="exercise-express-routing"><a href="#exercise-express-routing" aria-hidden="true" class="header-anchor">#</a> Exercise express routing</h1> <p>Tailwind Traders are impressed with your first Web Application and want you to improve it. So far you've been serving up all the data without thinking about the size of the data you serve. Imagine this static data instead is served up from a Database. A database could contain millions of records and you need to take into account. The below teaches you some techniques on limiting the size of your response.</p> <h2 id="leverage-route-parameters-and-query-parameters-to-limit-response-size"><a href="#leverage-route-parameters-and-query-parameters-to-limit-response-size" aria-hidden="true" class="header-anchor">#</a> Leverage route parameters and query parameters to limit response size</h2> <p>Data usually resides in a database or an endpoint. The size of that data can potentially be enormous. When a user then asks for all the data for a specific resource that could be a huge response like thousands or even millions of records. This can cause a massive strain on a database but it would also take a long time to serve that response. To avoid that scenario, it's considered good practice to <em>limit</em> the size of the response. A way to do that is by using route parameters so you can ask for specific records. Another way is to use query parameters to specify a subset of records. You will be taught both these techniques in this exercise.</p> <ol><li><p>Clone the repo at URL with the following command:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">git</span> clone <span class="token operator">&lt;</span>REPO url<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Now you have a good starter project. The project contains the product files and some starter application code. All you need to do is to fill in the missing parts.</p></li> <li><p>Let's inspect the repo you cloned. Type the following:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">cd</span> <span class="token operator">&lt;</span>repo dir<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>The outline of the directory should look like so:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>-<span class="token operator">|</span> app.js
-<span class="token operator">|</span> package.json
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>The <code>package.json</code> file contains a dependency <code>express</code>. Type the following command in the terminal to install that:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>npm</code> reads from the <code>dependencies</code> section in our <code>package.json</code> and you should be ready to continue.</p></li> <li><p>Time to inspect <code>app.js</code>. Open up said file. You should be seeing the following:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> port <span class="token operator">=</span> <span class="token number">3000</span>

<span class="token keyword">const</span> products <span class="token operator">=</span> <span class="token punctuation">[</span>
<span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  name<span class="token punctuation">:</span> <span class="token string">&quot;Ivanhoe&quot;</span><span class="token punctuation">,</span>
  author<span class="token punctuation">:</span> <span class="token string">&quot;Sir Walter Scott&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  name<span class="token punctuation">:</span> <span class="token string">&quot;Colour Magic&quot;</span><span class="token punctuation">,</span>
  author<span class="token punctuation">:</span> <span class="token string">&quot;Terry Pratchett&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
  name<span class="token punctuation">:</span> <span class="token string">&quot;The Bluest eye&quot;</span><span class="token punctuation">,</span>
  author<span class="token punctuation">:</span> <span class="token string">&quot;Toni Morrison&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hello API!'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/products/:id&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span>products<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">p</span> <span class="token operator">=&gt;</span> p<span class="token punctuation">.</span>id <span class="token operator">===</span> <span class="token operator">+</span>req<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/products'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Example app listening on port </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p>The above code contains an Express application. What you need to do is to implement two routes <code>/products/:id</code> and <code>/products</code>. The first route should only return a single product while the other one should return all products or as many products that are asked for by query parameters.</p></li> <li><p>Implement the route <code>/products/:id</code> by replacing this code:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/products/:id&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>with this code:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/products/:id&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span>products<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">p</span> <span class="token operator">=&gt;</span> p<span class="token punctuation">.</span>id <span class="token operator">===</span> <span class="token operator">+</span>req<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>Try running the app by typing the following command in the terminal:</p> <div class="language-output line-numbers-mode"><pre class="language-text"><code>node app.js
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Then navigate to <code>http://localhost:3000/products/1</code> in the Browser. You should now see the following output:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;id&quot;</span><span class="token keyword">:</span> 1,
  <span class="token string">&quot;name&quot;</span><span class="token keyword">:</span> <span class="token string">&quot;Ivanhoe&quot;</span>,
  <span class="token string">&quot;author&quot;</span><span class="token keyword">:</span> <span class="token string">&quot;Sir Walter Scott&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Great, you implemented the route correctly. It's using the route parameter <code>id</code> to find a specific product.</p></li> <li><p>Next, let's implement the route <code>/products</code>. Locate the following code:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/products'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Replace it with this code:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/products'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> page <span class="token operator">=</span> <span class="token operator">+</span>req<span class="token punctuation">.</span>query<span class="token punctuation">.</span>page<span class="token punctuation">;</span>
  <span class="token keyword">const</span> pageSize <span class="token operator">=</span> <span class="token operator">+</span>req<span class="token punctuation">.</span>query<span class="token punctuation">.</span>pageSize<span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>page <span class="token operator">&amp;&amp;</span> pageSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> start <span class="token operator">=</span> <span class="token punctuation">(</span>page <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> pageSize<span class="token punctuation">;</span>
    <span class="token keyword">const</span> end <span class="token operator">=</span> start <span class="token operator">+</span> pageSize<span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span>products<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span>products<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li> <li><p>Let's test this out by first starting our app by typing the following command in the terminal:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>node app.js
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>Start up a Browser and navigate to <code>http://localhost:3000/products?page=1&amp;pageSize=2</code>. You should see the following output in the browser:</p> <div class="language-output line-numbers-mode"><pre class="language-text"><code>[{
  &quot;id&quot;: 1,
  &quot;name&quot;: &quot;Ivanhoe&quot;,
  &quot;author&quot;: &quot;Sir Walter Scott&quot;
},
{
  &quot;id&quot;: 2,
  &quot;name&quot;: &quot;Colour Magic&quot;,
  &quot;author&quot;: &quot;Terry Pratchett&quot;
}]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>What you see is the first two records out of the total three. This means the query parameters <code>page</code> and <code>pageSize</code> is working to filter down the response size. Change the URL to <code>http://localhost:3000/products?page=2&amp;pageSize=2</code>. Now you've changed page from one to two. The response should now look like this:</p> <div class="language-output line-numbers-mode"><pre class="language-text"><code>[{
  &quot;id&quot;: 3,
  &quot;name&quot;: &quot;The Bluest eye&quot;,
  &quot;author&quot;: &quot;Toni Morrison&quot;
}]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>As there are only three records in total, the second page should only contain one record so what you see is correct. Congrats you successfully applied query parameters and used that to limit the response.</p></li></ol></div> <div class="navigation" data-v-f2b31bf6><a href="/books/node/exercise-express-routing" data-v-f2b31bf6> HTTP Server &gt;</a></div></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.af1af9d9.js" defer></script><script src="/assets/js/10.50c128a6.js" defer></script><script src="/assets/js/47.3bc4cde3.js" defer></script>
  </body>
</html>
