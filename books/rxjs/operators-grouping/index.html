<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>RxJS Book - Operators, grouping</title>
    <meta name="description" content="">
    <head link="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-abap.js"></head>
    
    <link rel="preload" href="/assets/css/0.styles.93390a24.css" as="style"><link rel="preload" href="/assets/js/app.eb0c370a.js" as="script"><link rel="preload" href="/assets/js/10.3c14d46c.js" as="script"><link rel="preload" href="/assets/js/89.46ebf3d2.js" as="script"><link rel="prefetch" href="/assets/js/1.24c608c1.js"><link rel="prefetch" href="/assets/js/100.e94ead96.js"><link rel="prefetch" href="/assets/js/101.4ef4ef5b.js"><link rel="prefetch" href="/assets/js/102.0aeafa5b.js"><link rel="prefetch" href="/assets/js/103.5f99b812.js"><link rel="prefetch" href="/assets/js/104.6aac54a0.js"><link rel="prefetch" href="/assets/js/105.515585f2.js"><link rel="prefetch" href="/assets/js/106.4ee91c4d.js"><link rel="prefetch" href="/assets/js/107.06965f57.js"><link rel="prefetch" href="/assets/js/108.c23e0f28.js"><link rel="prefetch" href="/assets/js/109.7b76b3d1.js"><link rel="prefetch" href="/assets/js/11.a62beca1.js"><link rel="prefetch" href="/assets/js/110.1ad2408f.js"><link rel="prefetch" href="/assets/js/111.c15bb740.js"><link rel="prefetch" href="/assets/js/112.677fe30c.js"><link rel="prefetch" href="/assets/js/113.6e421530.js"><link rel="prefetch" href="/assets/js/114.9deea547.js"><link rel="prefetch" href="/assets/js/115.76343fcc.js"><link rel="prefetch" href="/assets/js/116.a9bdc1af.js"><link rel="prefetch" href="/assets/js/117.821073db.js"><link rel="prefetch" href="/assets/js/118.e4f04bc7.js"><link rel="prefetch" href="/assets/js/119.abfdb5e0.js"><link rel="prefetch" href="/assets/js/12.07aa0299.js"><link rel="prefetch" href="/assets/js/120.97d65361.js"><link rel="prefetch" href="/assets/js/121.8881fece.js"><link rel="prefetch" href="/assets/js/122.509ec2af.js"><link rel="prefetch" href="/assets/js/123.25928f84.js"><link rel="prefetch" href="/assets/js/124.23dfa68d.js"><link rel="prefetch" href="/assets/js/125.505e6f2a.js"><link rel="prefetch" href="/assets/js/126.33667150.js"><link rel="prefetch" href="/assets/js/127.0cfd65ab.js"><link rel="prefetch" href="/assets/js/128.e2276a9a.js"><link rel="prefetch" href="/assets/js/129.e5f5228b.js"><link rel="prefetch" href="/assets/js/13.2ad02b9b.js"><link rel="prefetch" href="/assets/js/130.0a0d56cf.js"><link rel="prefetch" href="/assets/js/131.28c43f99.js"><link rel="prefetch" href="/assets/js/132.a68841a5.js"><link rel="prefetch" href="/assets/js/133.ff7fb3f9.js"><link rel="prefetch" href="/assets/js/134.dba2b25e.js"><link rel="prefetch" href="/assets/js/135.df8f62d0.js"><link rel="prefetch" href="/assets/js/136.f3d4488f.js"><link rel="prefetch" href="/assets/js/137.f284831f.js"><link rel="prefetch" href="/assets/js/138.c8f4020c.js"><link rel="prefetch" href="/assets/js/139.3d916307.js"><link rel="prefetch" href="/assets/js/14.29c9effd.js"><link rel="prefetch" href="/assets/js/140.ed352d8b.js"><link rel="prefetch" href="/assets/js/141.45f15508.js"><link rel="prefetch" href="/assets/js/142.b2a1f15b.js"><link rel="prefetch" href="/assets/js/143.058155c4.js"><link rel="prefetch" href="/assets/js/144.e1aa87ae.js"><link rel="prefetch" href="/assets/js/145.1220dcf1.js"><link rel="prefetch" href="/assets/js/146.c0a8a9b9.js"><link rel="prefetch" href="/assets/js/147.265284bf.js"><link rel="prefetch" href="/assets/js/148.2e990988.js"><link rel="prefetch" href="/assets/js/149.a5dd475a.js"><link rel="prefetch" href="/assets/js/15.94228c4c.js"><link rel="prefetch" href="/assets/js/150.9e4c920e.js"><link rel="prefetch" href="/assets/js/151.675a3e2f.js"><link rel="prefetch" href="/assets/js/152.f14f0254.js"><link rel="prefetch" href="/assets/js/153.073a877d.js"><link rel="prefetch" href="/assets/js/154.58ad47ca.js"><link rel="prefetch" href="/assets/js/155.10d4415a.js"><link rel="prefetch" href="/assets/js/156.499fe0b8.js"><link rel="prefetch" href="/assets/js/157.466eea0a.js"><link rel="prefetch" href="/assets/js/16.f3d226a0.js"><link rel="prefetch" href="/assets/js/17.f01c72ab.js"><link rel="prefetch" href="/assets/js/18.0fbc545b.js"><link rel="prefetch" href="/assets/js/19.4162c2d8.js"><link rel="prefetch" href="/assets/js/20.ad1e1678.js"><link rel="prefetch" href="/assets/js/21.a51000b6.js"><link rel="prefetch" href="/assets/js/22.19dc5d2b.js"><link rel="prefetch" href="/assets/js/23.6e46424d.js"><link rel="prefetch" href="/assets/js/24.912b150c.js"><link rel="prefetch" href="/assets/js/25.e2742232.js"><link rel="prefetch" href="/assets/js/26.f604e2cc.js"><link rel="prefetch" href="/assets/js/27.e87ef78f.js"><link rel="prefetch" href="/assets/js/28.f100b299.js"><link rel="prefetch" href="/assets/js/29.332427e5.js"><link rel="prefetch" href="/assets/js/3.95140222.js"><link rel="prefetch" href="/assets/js/30.d5598cad.js"><link rel="prefetch" href="/assets/js/31.6dc5c171.js"><link rel="prefetch" href="/assets/js/32.a8a8387a.js"><link rel="prefetch" href="/assets/js/33.4beb1729.js"><link rel="prefetch" href="/assets/js/34.12a60b80.js"><link rel="prefetch" href="/assets/js/35.4adea517.js"><link rel="prefetch" href="/assets/js/36.a72708ff.js"><link rel="prefetch" href="/assets/js/37.3718275b.js"><link rel="prefetch" href="/assets/js/38.4cfce973.js"><link rel="prefetch" href="/assets/js/39.8d0bef92.js"><link rel="prefetch" href="/assets/js/4.4e8b8d29.js"><link rel="prefetch" href="/assets/js/40.41ded3ea.js"><link rel="prefetch" href="/assets/js/41.a5991c6f.js"><link rel="prefetch" href="/assets/js/42.f83ccb83.js"><link rel="prefetch" href="/assets/js/43.944e926a.js"><link rel="prefetch" href="/assets/js/44.419e7011.js"><link rel="prefetch" href="/assets/js/45.8fecc792.js"><link rel="prefetch" href="/assets/js/46.b9cb8c56.js"><link rel="prefetch" href="/assets/js/47.34a46e82.js"><link rel="prefetch" href="/assets/js/48.761c3ba9.js"><link rel="prefetch" href="/assets/js/49.a8f8307e.js"><link rel="prefetch" href="/assets/js/5.44d1fb4e.js"><link rel="prefetch" href="/assets/js/50.d5498c3e.js"><link rel="prefetch" href="/assets/js/51.22ed6462.js"><link rel="prefetch" href="/assets/js/52.2fad4e3a.js"><link rel="prefetch" href="/assets/js/53.5143106c.js"><link rel="prefetch" href="/assets/js/54.0c5a9fb5.js"><link rel="prefetch" href="/assets/js/55.f8ad92ca.js"><link rel="prefetch" href="/assets/js/56.83d25568.js"><link rel="prefetch" href="/assets/js/57.d96060ff.js"><link rel="prefetch" href="/assets/js/58.e05884bd.js"><link rel="prefetch" href="/assets/js/59.0dd446ae.js"><link rel="prefetch" href="/assets/js/6.67cc1f3f.js"><link rel="prefetch" href="/assets/js/60.7b09418f.js"><link rel="prefetch" href="/assets/js/61.988bbee4.js"><link rel="prefetch" href="/assets/js/62.84f797dc.js"><link rel="prefetch" href="/assets/js/63.f38ea92b.js"><link rel="prefetch" href="/assets/js/64.fa48b3c7.js"><link rel="prefetch" href="/assets/js/65.05e0528f.js"><link rel="prefetch" href="/assets/js/66.3dbe3c75.js"><link rel="prefetch" href="/assets/js/67.b875180a.js"><link rel="prefetch" href="/assets/js/68.f2b8b54a.js"><link rel="prefetch" href="/assets/js/69.e9afc083.js"><link rel="prefetch" href="/assets/js/7.e50b16ef.js"><link rel="prefetch" href="/assets/js/70.4bb9f5e8.js"><link rel="prefetch" href="/assets/js/71.ecf6e281.js"><link rel="prefetch" href="/assets/js/72.1851a74c.js"><link rel="prefetch" href="/assets/js/73.9339e29f.js"><link rel="prefetch" href="/assets/js/74.c0f5fa6e.js"><link rel="prefetch" href="/assets/js/75.73caab18.js"><link rel="prefetch" href="/assets/js/76.e24aff70.js"><link rel="prefetch" href="/assets/js/77.d40aa17a.js"><link rel="prefetch" href="/assets/js/78.26cf6a79.js"><link rel="prefetch" href="/assets/js/79.ff46ea75.js"><link rel="prefetch" href="/assets/js/8.988484b0.js"><link rel="prefetch" href="/assets/js/80.c0fb9d64.js"><link rel="prefetch" href="/assets/js/81.cd32c4e1.js"><link rel="prefetch" href="/assets/js/82.6c28eb63.js"><link rel="prefetch" href="/assets/js/83.c3f5ddec.js"><link rel="prefetch" href="/assets/js/84.799f468d.js"><link rel="prefetch" href="/assets/js/85.bcac1afd.js"><link rel="prefetch" href="/assets/js/86.83f4f46e.js"><link rel="prefetch" href="/assets/js/87.85a69ae3.js"><link rel="prefetch" href="/assets/js/88.631724ab.js"><link rel="prefetch" href="/assets/js/9.4bb2b8d6.js"><link rel="prefetch" href="/assets/js/90.0c0adb7a.js"><link rel="prefetch" href="/assets/js/91.d2ad5f22.js"><link rel="prefetch" href="/assets/js/92.cffeae37.js"><link rel="prefetch" href="/assets/js/93.64b209d5.js"><link rel="prefetch" href="/assets/js/94.a32b839b.js"><link rel="prefetch" href="/assets/js/95.69298361.js"><link rel="prefetch" href="/assets/js/96.52f52fac.js"><link rel="prefetch" href="/assets/js/97.ddb48565.js"><link rel="prefetch" href="/assets/js/98.ce30c36c.js"><link rel="prefetch" href="/assets/js/99.a80b0689.js">
    <link rel="stylesheet" href="/assets/css/0.styles.93390a24.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="book-layout" data-v-4dacc20a><div class="left" data-v-4dacc20a><div class="book-detail" data-v-d992904e data-v-4dacc20a><div data-v-d992904e><div data-v-d992904e><!----> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth1" data-v-d992904e><!----> <span data-v-d992904e>RxJS Book - Basics</span></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/rxjs/async/" class="title" data-v-d992904e>RxJS Book - Async code</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/rxjs/why-rxjs/" class="title" data-v-d992904e>RxJS Book - Why RxJS</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/rxjs/installation-setup/" class="title" data-v-d992904e>RxJS Book - Installation and Setup</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth1" data-v-d992904e><!----> <span data-v-d992904e>RxJS Book - Observables</span></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/rxjs/observable-anatomy/" class="title" data-v-d992904e>RxJS Book - Observable Anatomy</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/rxjs/observer/" class="title" data-v-d992904e>RxJS Book - Observer</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/rxjs/producer/" class="title" data-v-d992904e>RxJS Book - Producer</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/rxjs/observable-vs-promise/" class="title" data-v-d992904e>RxJS Book - Observable vs Promise</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/rxjs/observable-wrapping/" class="title" data-v-d992904e>RxJS Book - Observable wrapping</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/rxjs/hot-n-cold-observables/" class="title" data-v-d992904e>RxJS Book - Hot n Cold Observables</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth1" data-v-d992904e><!----> <span data-v-d992904e>RxJS Book - Operators</span></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/rxjs/first-look-operators/" class="title" data-v-d992904e>RxJS Book - First look at operators</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/rxjs/marble-diagrams/" class="title" data-v-d992904e>RxJS Book - Marble diagrams</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/rxjs/observable-in-observable/" class="title" data-v-d992904e>RxJS Book - Observable in an Observable</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/rxjs/operators-construction/" class="title" data-v-d992904e>RxJS Book - Operators, construction</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/rxjs/operators-conversion/" class="title" data-v-d992904e>RxJS Book - Operators, conversion</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/rxjs/operators-combination/" class="title" data-v-d992904e>RxJS Book - Operators, combination</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/rxjs/operators-mathematical/" class="title" data-v-d992904e>RxJS Book - Operators, mathematical</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2 selected" data-v-d992904e><a href="/books/rxjs/operators-grouping/" class="title selected" data-v-d992904e>RxJS Book - Operators, grouping</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/rxjs/operators-time/" class="title" data-v-d992904e>RxJS Book - Operators, time</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth1" data-v-d992904e><!----> <span data-v-d992904e>RxJS Book - Error handling</span></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/rxjs/error-handling/" class="title" data-v-d992904e>RxJS Book - Error handling</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth1" data-v-d992904e><!----> <span data-v-d992904e>RxJS Book - Recipes</span></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/rxjs/testing/" class="title" data-v-d992904e>RxJS Book - Testing</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth1" data-v-d992904e><!----> <span data-v-d992904e>RxJS Book - HTTP</span></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/rxjs/operators-and-ajax/" class="title" data-v-d992904e>RxJS Book - Operators and AJAX</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/rxjs/cascading-calls/" class="title" data-v-d992904e>RxJS Book - Cascading calls</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth1" data-v-d992904e><!----> <span data-v-d992904e>RxJS Book - Subject</span></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/rxjs/subject/" class="title" data-v-d992904e>RxJS Book - Subject</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/rxjs/replay-subject/" class="title" data-v-d992904e>RxJS Book - Replay Subject</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/rxjs/async-subject/" class="title" data-v-d992904e>RxJS Book - Async Subject</a> <!----></div> <div data-v-d992904e>
      
    </div></div><div data-v-d992904e><div class="depth2" data-v-d992904e><a href="/books/rxjs/behavior-subject/" class="title" data-v-d992904e>RxJS Book - Behavior Subject</a> <!----></div> <div data-v-d992904e>
      
    </div></div></div></div> <div class="right theme-default-content" data-v-4dacc20a><div class="navigation hide" data-v-4dacc20a><a href="/books/rxjs" data-v-4dacc20a> start page &gt;</a></div> <div class="content__default" data-v-4dacc20a><h1 id="operators-grouping"><a href="#operators-grouping" aria-hidden="true" class="header-anchor">#</a> Operators Grouping</h1> <h2 id="buffer"><a href="#buffer" aria-hidden="true" class="header-anchor">#</a> buffer</h2> <p>The signature of <code>buffer()</code> operator is :</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">buffer</span><span class="token punctuation">(</span><span class="token punctuation">[</span>breakObservable<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Buffer itself means we wait with emitting any values until the <code>breakObservable</code> happens. An example of that is the following:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> timer<span class="token punctuation">,</span> interval <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> buffer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs/operators'</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> breakWhen$ <span class="token operator">=</span> <span class="token function">timer</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> stream$ <span class="token operator">=</span> <span class="token function">interval</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
  <span class="token function">buffer</span><span class="token punctuation">(</span> breakWhen$ <span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

stream$<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">'values'</span><span class="token punctuation">,</span>data <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>In this case the values 0,1,2,3 is emitted all at once.</p> <h3 id="business-case"><a href="#business-case" aria-hidden="true" class="header-anchor">#</a> Business case</h3> <p><strong>Auto complete</strong>
The most obvious case when dealing with the <code>buffer()</code> operator is an <code>auto complete</code>. But how does <code>auto complete</code> work? Let's look at it in steps</p> <ul><li>user enter keys</li> <li>search is made base on those keystrokes</li></ul> <p>The important thing though is that the search itself is carried out as you are typing, either it's carried out because you typed x number of characters or the more common approach is to let you finish typing and do the search, you could be editing as you type. So let's take our first step into such a solution:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> fromEvent<span class="token punctuation">,</span> timer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> debounceTime<span class="token punctuation">,</span> map<span class="token punctuation">,</span> buffer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs/operators'</span><span class="token punctuation">;</span>


<span class="token keyword">let</span> input <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'example'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> input$ <span class="token operator">=</span> <span class="token function">fromEvent</span><span class="token punctuation">(</span> input<span class="token punctuation">,</span> <span class="token string">'keyup'</span> <span class="token punctuation">)</span>

<span class="token keyword">let</span> breakWhen$ <span class="token operator">=</span> <span class="token function">timer</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> debounceBreak$ <span class="token operator">=</span> input$<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
  <span class="token function">debounceTime</span><span class="token punctuation">(</span> <span class="token number">2000</span> <span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> stream$ <span class="token operator">=</span> input$<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
  <span class="token function">map</span><span class="token punctuation">(</span> <span class="token parameter">ev</span> <span class="token operator">=&gt;</span> ev<span class="token punctuation">.</span>key <span class="token punctuation">)</span>
  <span class="token function">buffer</span><span class="token punctuation">(</span> debounceBreak$ <span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

stream$<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">'values'</span><span class="token punctuation">,</span>data <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>We capture <code>keyup</code> events. We also use a <code>debounce()</code> operator that essentially says; I will emit values once you stopped typing for x miliseconds. This solution is just a first step on the way however as it is reporting the exact keys being typed. A better solution would be to capture the input element's actual content and also to perform an ajax call, so let's look at a more refined solution:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> fromEvent<span class="token punctuation">,</span> timer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> debounceTime<span class="token punctuation">,</span> map<span class="token punctuation">,</span> buffer<span class="token punctuation">,</span> switchMap <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs/operators'</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> input <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'example'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> input$ <span class="token operator">=</span> <span class="token function">fromEvent</span><span class="token punctuation">(</span>input<span class="token punctuation">,</span> <span class="token string">'keyup'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> breakWhen$ <span class="token operator">=</span> <span class="token function">timer</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> debounceBreak$ <span class="token operator">=</span> input$<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
<span class="token function">debounceTime</span><span class="token punctuation">(</span> <span class="token number">2000</span> <span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> stream$ <span class="token operator">=</span> input$<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
  <span class="token function">map</span><span class="token punctuation">(</span> <span class="token parameter">ev</span> <span class="token operator">=&gt;</span> ev<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">buffer</span><span class="token punctuation">(</span>debounceBreak$<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">switchMap</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">allTypedKeys</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// do ajax</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Everything that happened during 2 sec'</span><span class="token punctuation">,</span> allTypedKeys<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token keyword">of</span><span class="token punctuation">(</span><span class="token string">'ajax based on '</span> <span class="token operator">+</span> input<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

stream$<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">'values'</span><span class="token punctuation">,</span>data <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>Let's call this one <code>auto complete on steroids</code>. The reason for the name is that we save every single interaction the user does before finally deciding on the final input that should become an Ajax call. So a result from the above could look like the following:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// from switchMap</span>
Everything that happened during <span class="token number">2</span> sec <span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Backspace&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Backspace&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Backspace&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Backspace&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Backspace&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Backspace&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Backspace&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;f&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;g&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;h&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;f&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;h&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;g&quot;</span><span class="token punctuation">]</span>

<span class="token comment">// in the subscribe(fnValue)</span>
app<span class="token operator">-</span>buffer<span class="token punctuation">.</span>js<span class="token punctuation">:</span><span class="token number">31</span> values ajax based on fghfgh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>As you can see we could potentially store a whole lot more about a user than just the fact that they made an auto complete search, we can store how they type and that may or may not be interesting..</p> <p><strong>Double click</strong></p> <p>In the example above I've showed how it could be interesting to capture groups of keys but another group of UI events of possible interests are mouse clicks, namely for capturing single, double or triple clicks. This is quite inelegant code to write if not in Rxjs but with it, it's a breeze:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> fromEvent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> debounceTime<span class="token punctuation">,</span> buffer<span class="token punctuation">,</span> map<span class="token punctuation">,</span> filter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs/operators'</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'btn2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> btn$ <span class="token operator">=</span> <span class="token function">fromEvent</span><span class="token punctuation">(</span>btn<span class="token punctuation">,</span> <span class="token string">'click'</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> debounceMouseBreak$ <span class="token operator">=</span> btn$<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
  <span class="token function">debounceTime</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> btnBuffered$ <span class="token operator">=</span> btn$<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
  <span class="token function">buffer</span><span class="token punctuation">(</span> debounceMouseBreak$<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">map</span><span class="token punctuation">(</span> <span class="token parameter">array</span> <span class="token operator">=&gt;</span> array<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">filter</span><span class="token punctuation">(</span> <span class="token parameter">count</span> <span class="token operator">=&gt;</span> count <span class="token operator">&gt;=</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
<span class="token punctuation">;</span>

btnBuffered$<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">'values'</span><span class="token punctuation">,</span>data <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>Thanks to the <code>debounce()</code> operator we are able to express wait for 300ms before emitting anything. This is quite few lines and it's easy for us to decide what our filter should look like.</p> <h2 id="buffertime"><a href="#buffertime" aria-hidden="true" class="header-anchor">#</a> bufferTime</h2> <p>The signature of <code>bufferTime()</code> is</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">bufferTime</span><span class="token punctuation">(</span><span class="token punctuation">[</span>ms<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>The idea is to record everything that happens during that time slice and output all the values. Below is an example of recording all activities on an input in 1 second time slices.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> fromEvent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> bufferTime <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs/operators'</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> input <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'example'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> input$ <span class="token operator">=</span> <span class="token function">fromEvent</span><span class="token punctuation">(</span> input<span class="token punctuation">,</span> <span class="token string">'input'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
  <span class="token function">bufferTime</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

input$<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'all inputs in 1 sec'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>In this case you will get an output looking like:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>all inputs <span class="token keyword">in</span> <span class="token number">1</span> sec <span class="token punctuation">[</span> Event<span class="token punctuation">,</span> Event<span class="token operator">...</span> <span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Not so usable maybe so we probably need to make it nice with a <code>filter()</code> to see what was actually typed, like so:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> fromEvent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> map<span class="token punctuation">,</span> bufferTime <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs/operators'</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> input <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'example'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> input$ <span class="token operator">=</span> <span class="token function">fromEvent</span><span class="token punctuation">(</span> input<span class="token punctuation">,</span> <span class="token string">'keyup'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
  <span class="token function">map</span><span class="token punctuation">(</span> <span class="token parameter">ev</span> <span class="token operator">=&gt;</span> ev<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">bufferTime</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

input$<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'all inputs in 1 sec'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>Also note I changed event to <code>keyup</code>. Now we are able to see all <code>keyup</code> events that happened for a sec.</p> <h3 id="business-case-2"><a href="#business-case-2" aria-hidden="true" class="header-anchor">#</a> Business case</h3> <p>The example above could be quite usable if you want to record what another user on the site is doing and want to replay all the interactions they ever did or if they started to type and you want to send this info over a socket. The last is something of a standard functionality nowadays that you see a person typing on the other end. So there are definitely use cases for this.</p></div> <div class="navigation hide" data-v-4dacc20a><a href="/books/rxjs" data-v-4dacc20a> start page &gt;</a></div></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.eb0c370a.js" defer></script><script src="/assets/js/10.3c14d46c.js" defer></script><script src="/assets/js/89.46ebf3d2.js" defer></script>
  </body>
</html>
